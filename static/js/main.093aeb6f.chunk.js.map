{"version":3,"sources":["lib/useWindowDimensions.js","components/MainHeader.js","lib/ActionTypeString.js","components/MemoInsertButton.js","lib/UtilityLibrary.js","lib/ServiceConfig.js","lib/ConnectionLibrary.js","actions/index.js","components/TagInputList.js","lib/TagTypeNames.js","components/parts/TagText.js","components/parts/ShowInfoSet.js","components/parts/SummaryMemo.js","components/FreeTagInputModal.js","components/FormedTagPutModal.js","components/parts/AuthButtons.js","components/SideMenu.js","components/SideDrawer.js","components/FeedbackSnackBar.js","components/parts/TagChip.js","components/MemoColumn.js","test/TestLoading.js","pages/TestMain.js","lib/windowScrollControll.js","components/MemoList.js","components/CirculerLoading.js","pages/MainListPage.js","components/TagSearchList.js","pages/TaggedSearchPage.js","components/ReplyColumns.js","components/ReplyColumnList.js","pages/ReplyThreadPage.js","components/NoticeColumn.js","components/NoticeList.js","pages/NoticeListPage.js","components/FavoriteList.js","pages/FavoriteListPage.js","components/UserTagConfigList.js","pages/UserConfigListPage.js","components/UserTagAdminList.js","pages/TagAdminListPage.js","routers.js","PageBase.js","pages/SingleButtonPage.js","pages/LoginPage.js","pages/ErrorPage.js","pages/LogoutPage.js","App.js","reducers/index.js","store/index.js","reportWebVitals.js","index.js"],"names":["useWindowDimensions","getWindowDimensions","window","width","innerWidth","height","innerHeight","useState","windowDimensions","setWindowDimensions","useEffect","onResize","addEventListener","removeEventListener","mainheaderStyle","makeStyles","theme","layOut","justifyContent","centerButton","display","nav","grid","padding","marginTop","marginBottom","background","borderRadius","color","textAlign","lineHeight","textDecoration","fontWeight","boxShadow","menuButton","marginRight","spacing","title","flexGrow","MainHeader","props","classes","prevPath","setPrevpath","location","useLocation","isBack","setIsBack","path","pathname","split","history","useHistory","AppBar","position","Toolbar","IconButton","onClick","push","edge","className","openMenu","aria-label","to","exact","a","Typography","variant","gutterBottom","PUSH_SHOW_MEMO_BUTTON","CLOSE_MEMOMAKE","LOAD_NEW_MEMO","RESET_MEMO","MEMO_END","ERROR_RESET","RESULT_ERROR","CONNECT_ERROR","CRITICAL_ERROR","NO_ACTION","SHOW_REPLY","TAGGED_SEARCH","MEMO_INSERT_END","MEMO_EDIT_END_MAIN","MEMO_EDIT_END_TAG","TAGGED_SEARCH_CONTINUE","SHOW_SNACK","LOADING_START","LOADING_END","AUTH_SUCCESS","USER_CONFIG_LIST","CHANGE_USER_CONFIG","SHOW_TAG_ADMIN","MAKE_TAG_ADMIN","MODIFY_TAG_ADMIN","GET_NOTICE_LIST","FREE_MODAL_OPEN","FORMED_MODAL_OPEN","MAKE_NEWFOLLOW_MODAL","DELETE_NEWFOLLOW_MODAL","MAKE_NEW_REPLY_MODAL","DELETE_NEW_REPLY_MODAL","SHOW_FAVORITE","useStyles","root","margin","extendedIcon","fabButton","bottom","right","zIndex","Iconspace","marginLeft","MemoInsertButton","useDispatch","React","bmenu","showMenu","anchorEl","setAnchorEl","modalIcons","action","icon","fontSize","Fab","event","currentTarget","aria-haspopup","Popover","onClose","console","log","open","Boolean","anchorOrigin","vertical","horizontal","transformOrigin","Breadcrumbs","map","d","Link","href","e","preventDefault","onModalOpen","menuPushEvent","checkHasContent","obj","Object","keys","length","getDateMessage","date","dd","Date","parse","nowdd","lessd","getFullYear","parseInt","getMonth","getDate","getHours","getMinutes","Math","round","getTimeStampNow","year_str","month_str","day_str","hour_str","minute_str","second_str","getSeconds","format_str","replace","API_URL","APICallController","this","viewname","name","params","typeStr","setFunc","dispatch","msg","setParams","assign","type","instance","axios","create","baseURL","headers","localStorage","getItem","get","then","results","data","errorFlg","result","catch","error","getTaggedData","arr","fromDay","next","tagArray","String","SCENE","callAPI","res","timeline","read","fav","endflg","auth_login_success","user_list","id","changeUserConfig","tagstatus","isshow","sendParam","user_config","main_tag","main","sub_tag","sub","makeNewTagByAdmin","rank","tagId","tagname","tagrank","tagtype","change","getTime","modifyTagByAdmin","loadNewMemo","RECORD_SET","flexWrap","asummary","backgroundColor","borderColor","border","nontag","textField","TagInputList","selected","setSelected","value","setValue","useSelector","state","auth_login","all_tag","nameSearch","setNameSearch","onTagClick","nowselected","some","el","reduce","prev","current","end","makeTagList","list","m","find","strTagName","getTagInfo","keyTag","Chip","numTagType","label","clickable","Tabs","onChange","Tab","hidden","TextField","placeholder","target","resB","filter","includes","TAG_TYPES","TAG_RANKS","TagText","tagtextarray","tag_list","sd","GetUserName","prefix","suffix","us","u","strName","GetTagName","followarea","SummaryMemo","datePublish","keySender","dateRegist","strTaglist","strMainText","FreeTagInputModal","hasTime","setHasTime","registTime","setRegistTime","canSubmit","setCanSubmit","mainText","setMainText","textRef","useRef","onSubmit","text","timeS","follow","reply_source","setReplyData","join","follow_data","pushNewMemo","closeAction","Modal","aria-labelledby","aria-describedby","modal","closeAfterTransition","Fade","in","Card","inputRef","multiline","minRows","fullWidth","Button","str","disabled","alignItems","paper","palette","shadows","FormedTagPutModal","defs","setDefs","lastOne","setLastOne","textRefMain","tag_source","formatted","setview","setTagArray","searchTagArray","intersection","setA","setB","_intersection","Set","elem","has","add","nowTag","keyTagMain","nowGroup","strGroup","newTagArray","phaseNow","acc","numTagPhase","forEach","element","showFlg","hasEl","s","showArray","strShow","size","delEl","del","putSelectedInPlace","ss","la","pop","onDecide","txt","copy","sendAction","restagarray","st","pushNewFormedMemo","TagButton","secondarySet","primarySet","onDelete","inputType","defaultValue","rows","InputLabelProps","shrink","multilineText","slice","CheckSpecialTag","googleClientId","process","LoginButton","red","callback","clientId","buttonText","onSuccess","response","post","token","accessToken","backend","grant_type","client_id","client_secret","access_token","refresh_token","setItem","err","SetAuthConnection","render","renderProps","class","onFailure","LogOutButton","handleLogOutAction","onLogoutSuccess","menuStyle","door","loginButtonBefore","animation","listShelf","column","borderLeft","SideMenu","userRank","onMove","menu","SideDrawer","Drawer","anchor","mobile","FeedbackSnackbar","enqueueSnackbar","useSnackbar","snacklist","notice_main","snack","autoHideDuration","funcColor","staffColor","guestColor","placeColor","actionColor","TagChip","colorPalette","tagdata","TagChipList","listStr","memo","borderTop","ulbutton","listStyle","align","topset","toName","todatePublish","toFooter","icons","headertext","libutton","editable","focus","outline","deleted","verticalAlign","fontStyle","MemoColumn","menuOpen","setEditable","bdelete","setDelete","editText","setEditText","userId","expanded","setExpanded","isFav","setFavorite","hasRead","setRead","getNames","tg","Box","memoId","hasreadCheck","hasfavCheck","boolHasDeleted","MenuListProps","MenuItem","onEditEnd","sendTxt","getView","contentEditable","dangerouslySetInnerHTML","__html","onInput","checkEditable","innerHTML","EditableColumn","txtSource","style","whiteSpace","substring","MainText","keyFollowId","onDeleteEnd","DeleteColumn","ize","keyReplyBase","endIcon","DoubleArrowOutlined","boolHasModified","listReceiver","styles","loadingRoot","opacity","top","loadingCircle","TestLoading","CircularProgress","TestMain","ScrollUpdater","checkInEnd","throttle","m1","document","documentElement","scrollTop","m2","scrollHeight","abs","scrollFunc","checkParam","listStyles","base","progress","MemoList","memo_main","changFlg","toJSON","setNewTimeLine","buffer","Grid","LinearProgress","CirculerSelf","CirculerLoading","isLoad","isModal","MainListPage","setView","TagSearchList","tagged_main","changeFlg","start","setStart","showEnd","setShowEnd","showProgress","setShowProgress","sendSelectedTag","day","arr_res","setNewTagList","TaggedSearchPage","memoSub","default","memoChild","memoParent","textarea","ReplyColumn","boxstyle","mark","maintext","favorite","hasStar","setHasStar","bstyle","setBoxStyle","checkText","exp","onExpanded","Collapse","collapsedHeight","wrapper","content","clear","left","ReplyColumnList","setLineHeight","wrapperHeight","useLayoutEffect","handleResize","clientHeight","ref","ReplyThreadPage","reply_main","match","load_flg","past_thread","parent_data","self_data","child_data","future_thread","mainExp","subExp","NoticeColumn","userlist","keyMemoMain","senderMsg","setSenderMsg","sender","getUserName","numNoticeType","underline","NoticeList","notices","count","NoticeListPage","FavoriteList","show_favorite","FavoriteListPage","formControl","minWidth","selectEmpty","UserTagConfigColumn","numTagStatus","status","setStatus","boolIsShownInList","isShow","setIsShow","FormControl","NativeSelect","stnow","onChangeTabSearch","inputProps","defaultChecked","FormControlLabel","control","Checkbox","checked","UserTagConfigList","uConfigList","UserConfigListPage","UserTagAdminColumn","tag_admin","tagName","setTagName","tagRank","setTagRank","tagType","setTagType","errorMsg","setErrorMsg","onColumnCancel","onCancel","numTagRank","dispatcher","modeEdit","tr","tt","onSelect","modeView","UserTagAdminList","openid","setOpenId","setAdd","changeViewList","viewtype","setViewType","setShowArray","onColumnSelect","component","RadioGroup","row","Radio","TagAdminListPage","withRouter","getPathDepth","pathArr","n","prevDepth","setPrevDepth","currentKey","TransitionGroup","CSSTransition","timeout","enter","exit","classNames","mountOnEnter","unmountOnExit","Styles","side","contentMobile","contentDesktop","article","PageBase","error_control","setMenuOpen","freetagOpen","setFreeTagOpen","formtagOpen","setformTagOpen","setFollowOpen","follow_main","onMenuClose","closeModal","isMobile","FeedbackSnackBar","loginroot","card","maxWidth","button","SingleButtonPage","Content","ButtonAction","Footer","CardActions","LoginPage","CardContent","CardMedia","image","CardAction","redi","ErrorPage","errorCode","setErrorCode","LogoutPage","App","INIT_ACTION","unit_list","isPrivate","login_id","INIT_AUTH_STATE","INIT_TAG_ADMIN_STATE","INIT_MEMO_MAIN_STATE","memomake_open","INIT_TAGGED_SEARCH","INIT_REPLY_MAIN","INIT_FOLLOW_ACTION","INIT_NOTICE","ERROR_DATA","combineReducers","endFlg","resA","concat","newtimeline","userConf","all","keyParent","store","initialState","logger","createLogger","collapsed","diff","middleware","applyMiddleware","thunk","compose","createStoreWithMiddleware","createStore","rootReducer","configureStore","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","maxSnack","getElementById"],"mappings":"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","file":"static/js/main.093aeb6f.chunk.js","sourcesContent":["import { useState, useEffect } from 'react';\r\n \r\nexport const useWindowDimensions = () => {\r\n \r\n  const getWindowDimensions = () => {\r\n    const { innerWidth: width, innerHeight: height } = window;\r\n    return {\r\n      width,\r\n      height\r\n    };\r\n  }\r\n \r\n  const [windowDimensions, setWindowDimensions] = useState(getWindowDimensions());\r\n  useEffect(() => {\r\n    const onResize = () => {\r\n      setWindowDimensions(getWindowDimensions());\r\n    }\r\n    window.addEventListener('resize', onResize);\r\n    return () => window.removeEventListener('resize', onResize);\r\n  }, []);\r\n  return windowDimensions;\r\n}\r\n","import React,{useEffect,useState} from 'react';\r\nimport { NavLink,useLocation,useHistory } from 'react-router-dom';\r\nimport  {useWindowDimensions} from '../lib/useWindowDimensions';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\n\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\n\r\n\r\n//メモ単画像表示\r\n\r\n//現在ログインしているユーザの名前を表示する\r\n//ログインしているユーザーがいなければ施設の名前を表示する\r\n\r\n//機能メニューを表示する\r\n\r\nconst mainheaderStyle = makeStyles((theme) => ({\r\n  // root:{\r\n  //   flexGrow: 1,\r\n  //   display :\"flex\",\r\n  //   justifyContent: \"center\"\r\n  \r\n  // },\r\n  layOut:{\r\n    justifyContent: \"center\"\r\n  },\r\n    centerButton:{\r\n      display:\"flex\",\r\n      justifyContent:\"center\"\r\n\r\n    },\r\n    nav: {\r\n      display: \"grid\",\r\n      grid: \"auto / auto-flow\",\r\n      padding: \"3px\",\r\n      marginTop: \"4px\",\r\n      marginBottom: \"4px\",\r\n      background: \"#eee\",\r\n      borderRadius: \"10px\",\r\n\r\n      \"& a\" :{\r\n        display: \"block\",\r\n        color: \"#000\",\r\n        //marginRight:\"15px\",\r\n        //marginLeft:\"15px\",\r\n        padding:\" 0 20px\",\r\n        textAlign: \"center\",\r\n        lineHeight: \"32px\",\r\n        textDecoration: \"none\"\r\n      },\r\n      \"& a.active\" : {\r\n        background: \"#fff\",\r\n        fontWeight: 500,\r\n        borderRadius: \"8px\",\r\n        boxShadow: \"0 1px 4px rgba(0, 0, 0, 0.1)\"\r\n      }\r\n    \r\n    },\r\n    menuButton: {\r\n      marginRight: theme.spacing(2),\r\n    },\r\n    title: {\r\n      flexGrow: 1,\r\n    },\r\n    \r\n  }));\r\n  \r\n\r\nconst MainHeader=(props)=>{\r\n  //console.log(\"props\"+ props);\r\n    const classes = mainheaderStyle();\r\n    const [prevPath,setPrevpath]=useState(\"\");\r\n    const location=useLocation();\r\n    const [isBack,setIsBack]=useState(false);\r\n\r\n    const openSearch=()=>{\r\n      //showSearch(!search);\r\n    };\r\n\r\n    useEffect(()=>{\r\n\r\n      const path=location.pathname.split(\"/\")[1];\r\n      if ( \"tag\" === path || \"main\" === path ){\r\n        setIsBack(false);\r\n        setPrevpath(path);\r\n      }else{\r\n        setIsBack(true);\r\n      }\r\n\r\n    },[location]);\r\n    const history=useHistory();\r\n\r\n    const { width, height } = useWindowDimensions();\r\n    //今はサイズは適当\r\n    //if (width>500){\r\n        return (\r\n            <div   >\r\n              <AppBar position=\"fixed\"  >\r\n                <Toolbar>\r\n                  {isBack ?\r\n                    <IconButton  onClick={()=>history.push(\"/\"+prevPath)} ><ArrowBackIcon/></IconButton>\r\n                    :\r\n                    width<600  &&\r\n                          <IconButton edge=\"start\" className={classes.menuButton}  onClick={()=>props.openMenu()} color=\"inherit\" aria-label=\"menu\">\r\n                             <MenuIcon  />\r\n                          </IconButton>\r\n\r\n                  }\r\n                  {!isBack &&\r\n                    <div className={classes.centerButton}>\r\n                      <span className={classes.nav}>\r\n                          <NavLink to=\"/main\" exact><div className={classes.a}><Typography variant='h6' gutterBottom >  一覧  </Typography></div></NavLink>\r\n                          <NavLink to=\"/tag\" exact><div className={classes.a}><Typography variant='h6' gutterBottom > タグ検索 </Typography></div></NavLink>\r\n                      </span>\r\n                      \r\n                      <IconButton onClick={()=>openSearch()}  ><SearchIcon/></IconButton>\r\n                    </div>\r\n\r\n                  }\r\n              \r\n                </Toolbar>\r\n              </AppBar>\r\n            </div>\r\n          );\r\n\r\n    //}\r\n\r\n}\r\n\r\nexport default MainHeader;","export const PUSH_SHOW_MEMO_BUTTON=\"PUSH_SHOW_MEMO_BUTTON\";\r\nexport const PRIVATE ='PRIVATE';\r\nexport const TEAM ='TEAM';\r\nexport const CLOSE_MEMOMAKE='CLOSE_MEMOMAKE';\r\nexport const CLOSE_PASSWORD='CLOSE_PASSWORD';\r\nexport const OPEN_PASSWORD='OPEN_PASSWORD';\r\nexport const LOAD_NEW_MEMO=\"LOAD_NEW_MEMO\";\r\nexport const RESET_MEMO=\"RESET_MEMO\";\r\nexport const MEMO_END=\"MEMO_END\";\r\nexport const ERROR_RESET=\"ERROR_RESET\";\r\nexport const RESULT_ERROR=\"RESULT_ERROR\";\r\nexport const CONNECT_ERROR=\"CONNECT_ERROR\";\r\nexport const CRITICAL_ERROR =\"CRITICAL_ERROR\";\r\n\r\nexport const NO_ACTION=\"NO_ACTION\";\r\n\r\nexport const USER_LOGIN=\"USER_LOGIN\";\r\nexport const DONE_LOGOUT=\"DONE_LOGOUT\";\r\n\r\nexport const SHOW_REPLY=\"SHOW_REPLY\";\r\nexport const TAGGED_START=\"TAGGED_START\";\r\nexport const TAGGED_SEARCH=\"TAGGED_SEARCH\";\r\nexport const MEMO_INSERT_END = \"MEMO_INSERT_END\";\r\nexport const MEMO_EDIT_END_MAIN =\"MEMO_EDIT_END_MAIN\";\r\nexport const MEMO_EDIT_END_TAG =\"MEMO_EDIT_END_TAG\";\r\n\r\nexport const TAGGED_SEARCH_CONTINUE=\"TAGGED_SEARCH_CONTINUE\";\r\nexport const RESET_TAG=\"RESET_TAG\";\r\nexport const SHOW_SNACK=\"SHOW_SNACK\";\r\nexport const LOADING_START= \"LOADING_START\";\r\nexport const LOADING_END= \"LOADING_END\";\r\n\r\n\r\nexport const PUSH_NEW_MEMO=\"PUSH_NEW_MEMO\";\r\nexport const PUSH_PASSWORD=\"PUSH_PASSWORD\";\r\nexport const DELETE_MEMO=\"DELETE_MEMO\";\r\nexport const AUTH_START = \"AUTH_START\";\r\nexport const AUTH_SUCCESS = \"AUTH_SUCCESS\";\r\nexport const AUTH_FAIL = \"AUTH_FAIL\";\r\nexport const AUTH_LOGOUT = \"AUTH_LOGOUT\";\r\n\r\nexport const USER_CONFIG_LIST = \"USER_CONFIG_LIST\";\r\nexport const CHANGE_USER_CONFIG = \"CHANGE_USER_CONFIG\";\r\nexport const CHANGE_USER_CONFIG_SHOW = \"CHANGE_USER_CONFIG_SHOW\";\r\n\r\nexport const SHOW_TAG_ADMIN= \"SHOW_TAG_ADMIN\";\r\nexport const MAKE_TAG_ADMIN= \"MAKE_TAG_ADMIN\";\r\nexport const MODIFY_TAG_ADMIN= \"MODIFY_TAG_ADMIN\";\r\n\r\nexport const GET_MEMO_REQUEST=\"GET_MEMO_REQUEST\";\r\nexport const GET_MEMO_SUCCESS=\"GET_MEMO_SUCCESS\";\r\nexport const GET_MEMO_FAILURE=\"GET_MEMO_FAILURE\";\r\nexport const GET_NOTICE_LIST=\"GET_NOTICE_LIST\";\r\nexport const FREE_MODAL_OPEN=\"FREE_MODAL_OPEN\";\r\nexport const FORMED_MODAL_OPEN=\"FORMED_MODAL_OPEN\";\r\nexport const MAKE_NEWFOLLOW_MODAL=\"MAKE_NEWFOLLOW_MODAL\";\r\nexport const DELETE_NEWFOLLOW_MODAL=\"DELETE_NEWFOLLOW_MODAL\";\r\n\r\nexport const MAKE_NEW_REPLY_MODAL=\"MAKE_NEW_REPLY_MODAL\";\r\nexport const DELETE_NEW_REPLY_MODAL=\"DELETE_NEW_REPLY_MODAL\";\r\n\r\n\r\nexport const CHANGE_MAIN_VIEW=\"CHANGE_MAIN_VIEW\";\r\nexport const CHANGE_TAG_VIEW=\"CHANGE_TAG_VIEW\";\r\nexport const CHANGE_REPLY_VIEW=\"CHANGE_REPLY_VIEW\";\r\n\r\nexport const SHOW_FAVORITE=\"SHOW_FAVORITE\";\r\n\r\n\r\n\r\n","import React,{useState} from 'react';\r\nimport {useDispatch}  from 'react-redux';\r\nimport {Fab,Menu,MenuItem,Popover,Breadcrumbs,Link,Typography}  from '@material-ui/core';\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport CreateIcon from '@material-ui/icons/Create';\r\nimport BorderColorSharpIcon from '@material-ui/icons/BorderColorSharp';\r\nimport MailOutlineIcon from '@material-ui/icons/MailOutline';\r\nimport RecordVoiceOverIcon from '@material-ui/icons/RecordVoiceOver';\r\n\r\n\r\n//import {pushNewMemo}  from '../actions';\r\nimport {FREE_MODAL_OPEN,FORMED_MODAL_OPEN} from '../lib/ActionTypeString';\r\nimport { EmailOutlined } from '@material-ui/icons';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n      '& > *': {\r\n        margin: theme.spacing(1),\r\n      },\r\n    },\r\n    extendedIcon: {\r\n      marginRight: theme.spacing(1),\r\n    },\r\n    fabButton:{\r\n        position:\"fixed\",\r\n        bottom:10,\r\n        right:10,\r\n        zIndex:100\r\n\r\n    },\r\n    Iconspace:{\r\n      marginRight:theme.spacing(2),\r\n      marginLeft:theme.spacing(2),\r\n\r\n    }\r\n\r\n\r\n  }));\r\n  \r\n\r\nconst MemoInsertButton=(props)=>{\r\n    const dispatch=useDispatch();\r\n\r\n    //どこをクリックしても消せるようにしたいのでstateはreduxに振る\r\n    const [bmenu,showMenu]=React.useState(null);\r\n    const [anchorEl,setAnchorEl]=useState(null);\r\n\r\n    const onClick=(event)=>{\r\n        showMenu(event.currentTarget);\r\n        setAnchorEl(event.currentTarget);\r\n    };\r\n\r\n    const menuPushEvent =(action,e )=>{\r\n        e.preventDefault();\r\n        setAnchorEl(null);\r\n        \r\n        showMenu(null);\r\n        props.onModalOpen(action);\r\n    };\r\n    const onClose=(event)=>{\r\n        console.log(\"close\");\r\n        showMenu(null);\r\n        setAnchorEl(null);\r\n    };\r\n   \r\n    const modalIcons=[\r\n      {action: FREE_MODAL_OPEN ,icon: <MailOutlineIcon fontSize=\"large\" />},\r\n      {action: \"dm\" ,icon: <RecordVoiceOverIcon fontSize=\"large\" />},\r\n      {action: FORMED_MODAL_OPEN ,icon: <CreateIcon fontSize=\"large\" />},\r\n    ];\r\n\r\n    const classes = useStyles();\r\n\r\n    return(\r\n        <div >\r\n            <Fab \r\n            className={classes.fabButton}\r\n            onClick={onClick}\r\n            color=\"primary\" \r\n            aria-label=\"add\"\r\n            aria-haspopup=\"true\">\r\n                <AddIcon/>\r\n            \r\n                \r\n            </Fab>\r\n\r\n            <Popover\r\n                    anchorEl={anchorEl}\r\n                    \r\n                    onClose={onClose}\r\n                    \r\n                    open={Boolean(bmenu)}\r\n                    anchorOrigin={{\r\n                    vertical: 'center',\r\n                        horizontal: 'left',\r\n                    }}\r\n                    transformOrigin={{\r\n                        vertical: 'center',\r\n                        horizontal: 'right',\r\n                    }}\r\n                >\r\n\r\n                <Breadcrumbs aria-label=\"breadcrumb\">\r\n                    {\r\n                      modalIcons.map((d)=>{\r\n                        return (\r\n                            <Link color=\"inherit\" href=\"/\" onClick={(e)=>menuPushEvent(d.action,e)}>\r\n                              <div className={classes.Iconspace}>{d.icon}</div>\r\n                          </Link>\r\n                        )\r\n                      })\r\n\r\n                    }\r\n\r\n                </Breadcrumbs>\r\n            </Popover>\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nexport default MemoInsertButton;\r\n\r\n","//共通で使いそうな関数をまとめておく　stateとかは取らず　共通のデータ構造にのみ依存するように作っておく\r\n\r\nexport const getUserName=(user_list,id)=>{\r\n    const us=user_list.find(u=>u.id===id);\r\n    if (!us) return \"名称不定\";\r\n\r\n    return us.strName;\r\n};\r\n\r\nexport const checkHasContent=(obj)=>{\r\n    if (!obj ) return false;\r\n    return Object.keys(obj).length>0;\r\n};\r\n\r\nexport const getTagInfo=(list,id)=>{\r\n    const res=list.find(d=>d.id===id);\r\n    if(!res) return {id:-1,　strTagName:\"存在しないタグ\"};\r\n\r\n    return res;\r\n}\r\n\r\nexport const getTagNames=(tag_list,strArray)=>{\r\n    const strs=strArray.split(\",\");\r\n    return strs.map((d)=>{\r\n        const us= tag_list.find(u=>u.id===d.id);\r\n        if (!us) return \"タグ不定\";\r\n        return us.strTagName;\r\n    });    \r\n};\r\n\r\n//入力はYYYY-MM-DD HH:MM\r\nexport const getDateMessage=(date)=>{\r\n    //console.log(date);\r\n    //console.log(Date.parse(date));\r\n    const dd= new Date(Date.parse(date)) ;\r\n    const nowdd=new Date();\r\n\r\n    const lessd=nowdd-dd;\r\n\r\n    if(lessd<0){\r\n        return  \"予定 :\"+dd.getFullYear()+\"年\"+parseInt(1+dd.getMonth())+\"月\"+dd.getDate()+\"日 \"+dd.getHours()+\":\"+dd.getMinutes();\r\n  \r\n    }else if(lessd<1000*60){\r\n        return \"数秒前\";\r\n\r\n    }else if( lessd<1000*60*60 ){\r\n        return  Math.round(lessd/(1000*60)) + \"分前\"; \r\n    }else if(lessd<1000*60*60*24){\r\n       // console.log(lessd/(1000*60*60));\r\n        return  Math.round(lessd/(1000*60*60)) + \"時間前\";\r\n\r\n    }else if (lessd<1000*60*60*48 &&   nowdd.getDate()-dd.getDate()===1 ){\r\n        return  \"昨日\"+ dd.getHours() + \"時\"+ dd.getMinutes() + \"分\"; \r\n    }else if( dd.getFullYear()===nowdd.getFullYear()){\r\n        return parseInt(1+dd.getMonth())+\"月\"+dd.getDate()+\"日 \"+dd.getHours()+\":\"+dd.getMinutes();\r\n    }else{\r\n        return dd.getFullYear()+\"年\"+parseInt(1+dd.getMonth())+\"月\"+dd.getDate()+\"日 \"+dd.getHours()+\":\"+dd.getMinutes();\r\n    }\r\n};\r\n\r\nexport const getTimeStampNow=()=>{\r\n\r\n    const date = new Date();\r\n    //console.log( 'date:', date);\r\n\r\n    const year_str = date.getFullYear();\r\n    const month_str = date.getMonth()+1;\r\n    const day_str = date.getDate();\r\n    const hour_str = date.getHours();\r\n    const minute_str = date.getMinutes();\r\n    const second_str = date.getSeconds();\r\n\r\n    let format_str = 'YYYY-MM-DD hh:mm:ss';\r\n    format_str = format_str.replace(/YYYY/g, year_str);\r\n    format_str = format_str.replace(/MM/g, month_str);\r\n    format_str = format_str.replace(/DD/g, day_str);\r\n    format_str = format_str.replace(/hh/g, hour_str);\r\n    format_str = format_str.replace(/mm/g, minute_str);\r\n    format_str = format_str.replace(/ss/g, second_str);\r\n    //console.log(\"format_str\",format_str);\r\n    return format_str;\r\n}","\r\n//export const API_URL='http://127.0.0.1:8000/api/';\r\nexport const API_URL='http://itohkun55.pythonanywhere.com/api';","import axios from 'axios';\r\nimport {CONNECT_ERROR ,RESULT_ERROR, SHOW_SNACK,LOADING_START,LOADING_END} from './ActionTypeString';\r\nimport {API_URL} from './ServiceConfig';\r\n//const URL='http://127.0.0.1:8000/api/';\r\n//APIへの接続をまとめておく\r\n\r\nclass APICallController{\r\n\r\n    constructor(){\r\n        this.viewname=\"\";\r\n    }\r\n\r\n\r\n    setView(viewname){\r\n        this.viewname=viewname;\r\n\r\n    }\r\n\r\n    getView(){\r\n        return this.viewname;\r\n    }\r\n\r\n\r\n    callAPI(name,params,typeStr,setFunc,dispatch,msg=\"\",loadFunc=null){\r\n        const setParams=Object.assign({},params);\r\n        //setParams.userId=this.userId;\r\n        //setParams.facId=this.facId;\r\n        setParams.viewname=this.viewname;\r\n        //setParams.fromId=this.fromId;\r\n        \r\n        dispatch({type:LOADING_START});\r\n\r\n        const instance = axios.create({\r\n            baseURL: API_URL,\r\n            headers: {'Authorization': 'Bearer '+ localStorage.getItem('access_token')}\r\n\r\n          });\r\n\r\n        instance.get(name,{params:setParams})\r\n        .then(results=>{\r\n            console.log(\"results.data\",results.data);\r\n    \r\n            \r\n            if(results.data.errorFlg ){\r\n                dispatch({type:RESULT_ERROR,result:results.data});    \r\n                return;\r\n            }\r\n\r\n            const result=setFunc(results.data);\r\n            //console.log(typeStr,results,result);\r\n\r\n        \r\n            if (msg!==\"\") {\r\n                console.log(\"msg\",msg);\r\n                dispatch({type:SHOW_SNACK,msg:msg});\r\n            }    \r\n            dispatch({type:typeStr,result:result});\r\n            dispatch({type:LOADING_END});\r\n\r\n        }).catch(error=>{\r\n            \r\n            console.log(\"CONNECT_ERROR\");\r\n            console.log(error);\r\n            //　後で　エラーをまとめてイベント表示する\r\n            dispatch({type:CONNECT_ERROR,error});\r\n            dispatch({type:LOADING_END});\r\n    \r\n        });\r\n    }\r\n}\r\n\r\nexport default new APICallController();\r\n","import {\r\n    SHOW_REPLY,\r\n    CLOSE_MEMOMAKE,\r\n    LOAD_NEW_MEMO,\r\n    RESET_MEMO,\r\n    USER_LOGIN,\r\n    AUTH_SUCCESS,\r\n    RESET_TAG,\r\n    TAGGED_SEARCH,\r\n    TAGGED_SEARCH_CONTINUE,\r\n    GET_NOTICE_LIST,\r\n    SHOW_FAVORITE,\r\n    USER_CONFIG_LIST,\r\n    CHANGE_USER_CONFIG,\r\n    MEMO_INSERT_END,\r\n    MEMO_EDIT_END_MAIN,\r\n    MEMO_EDIT_END_TAG,\r\n    NO_ACTION,\r\n    MAKE_TAG_ADMIN,\r\n    SHOW_TAG_ADMIN,\r\n    MODIFY_TAG_ADMIN\r\n}  from '../lib/ActionTypeString';\r\n\r\nimport {TestReplyData} from '../lib/TestReplyThreadData';\r\nimport {TestTagListData,FormedTagInputData} from  '../lib/TestTagListData';\r\nimport {getTimeStampNow} from '../lib/UtilityLibrary';\r\n\r\nimport axios from 'axios';\r\nimport  APICallController from '../lib/ConnectionLibrary';\r\n\r\n\r\n\r\n\r\nexport const getTaggedData=(arr,fromDay,next=false)=>dispatch=>{\r\n    let tagArray=\"-1\";\r\n    if (arr.length>0){\r\n        tagArray= String(arr);\r\n    }\r\n\r\n\r\n    const resFunc=(res)=>{\r\n        return { timeline:res.timeline,read:res.read,fav:res.fav,endflg:res.endflg };\r\n    };\r\n\r\n    let SCENE=TAGGED_SEARCH;\r\n    if (next){\r\n        SCENE=TAGGED_SEARCH_CONTINUE;\r\n    } \r\n\r\n    APICallController.callAPI(\"tags\",{tagArray:tagArray,fromDay:fromDay},SCENE,resFunc,dispatch);\r\n\r\n};\r\n\r\nexport const setReplyData=(tagArray,mainText,dateRegist,data)=>dispatch=>{\r\n\r\n    const sendParam={ \r\n        \"memoId\":data.id,\r\n        'tagArray':tagArray,\r\n        'mainText':mainText,\r\n        'datePublish':getTimeStampNow(),\r\n        'dateRegist':dateRegist\r\n    };\r\n\r\n    const resFunc=(res)=>{\r\n        return {res:res,id:data.id};\r\n    };\r\n\r\n    APICallController.callAPI(\"repinsert\",sendParam,SHOW_REPLY,resFunc,dispatch);\r\n};\r\n\r\n\r\nexport const getReplyData=(id)=>dispatch=>{\r\n\r\n    const resFunc=(res)=>{\r\n        return { timeline:res.timeline,read:res.read,fav:res.fav,endflg:res.endflg,id:id };\r\n    };\r\n    APICallController.callAPI(\"reply\",{memoId:id},SHOW_REPLY,resFunc,dispatch);\r\n    //dispatch({type:SHOW_REPLY, self_data,past_thread,parent_data,child_data,future_thread });\r\n};\r\n\r\n\r\n\r\n\r\n//最初の認証終了時(想定）のアクション\r\n//本来は色々引数があるはず\r\n\r\nexport const auth_login_success=props=>dispatch=>{\r\n\r\n    const resFunc=(res)=>{\r\n        const user_list=res.user_list;\r\n        user_list.push({name:\"未設定\",id:-1});\r\n\r\n        return { res:res};\r\n    };\r\n    \r\n    APICallController.callAPI(\"inituser\",{},AUTH_SUCCESS,resFunc,dispatch);\r\n\r\n\r\n};\r\n\r\n\r\n//\r\nexport const login_start=(login_id,password)=>dispatch=>{\r\n    //実際はサーバーとの認証処理を行い再度データを取り出す\r\n\r\n    dispatch({type:USER_LOGIN,login_id,password});\r\n};\r\n\r\n\r\n//メモを新規追加して送信し、その結果を戻す\r\nexport const pushNewMemo=(tagArray,mainText,dateRegist,follow=-1)=>dispatch=>{\r\n\r\n    const resFunc=(res)=>{\r\n        const now=new Date().getTime();\r\n        return { change:now};\r\n    };\r\n\r\n    const sendParam={ 'settags':tagArray,'mainText':mainText,'datePublish':getTimeStampNow(),'dateRegist':dateRegist,'followId':follow };\r\n    APICallController.callAPI(\"memoinsert\",sendParam,MEMO_INSERT_END,resFunc,dispatch,\"書き込み完了しました。\");    \r\n\r\n};\r\n\r\n//メモを新規追加して送信し、その結果を戻す\r\nexport const editMemo=(id, mainText)=>dispatch=>{\r\n\r\n    const resFunc=(res)=>{ return res;};\r\n\r\n    let SCENE=MEMO_EDIT_END_MAIN;\r\n    if (APICallController.getView()==\"tag\"){\r\n        SCENE=MEMO_EDIT_END_TAG;\r\n    } \r\n    const sendParam={ 'memoId':id,'mainText':mainText };\r\n    APICallController.callAPI(\"memomodify\",sendParam,SCENE,resFunc,dispatch,\"修正完了しました。\");    \r\n};\r\n\r\nexport const deleteMemo=(id)=>dispatch=>{\r\n    \r\n    const resFunc=(res)=>{\r\n        const now=new Date().getTime();\r\n        return { change:now};\r\n    };\r\n    const sendParam={ 'memoId':id };\r\n    //通信後の挙動は挿入と全く同じなので、MEMO_INSERT_ENDを入れておく\r\n    APICallController.callAPI(\"memodelete\",sendParam,MEMO_INSERT_END,resFunc,dispatch,\"削除完了しました。\"); \r\n};\r\n\r\n\r\nexport const loadUserConfig=()=>dispatch=>{\r\n    const resFunc=(res)=>{\r\n        return {user_config:res};\r\n    };\r\n    APICallController.callAPI(\"tagconfig\",{},USER_CONFIG_LIST,resFunc,dispatch);    \r\n\r\n};\r\n\r\nexport const resetUserConfig=()=>dispatch=>{\r\n    const resFunc=(res)=>{\r\n        return {user_config:res};\r\n    };\r\n    APICallController.callAPI(\"tagreset\",{},USER_CONFIG_LIST,resFunc,dispatch,\"タグがすべてリセットされました。\");    \r\n\r\n};\r\n\r\nexport const changeUserConfig=(id,tagstatus,isshow)=>dispatch=>{\r\n    const resFunc=(res)=>{\r\n        return {user_config:res.user_config,main_tag:res.main,sub_tag:res.sub};\r\n    };\r\n    const sendParam={\"tagId\":id,\"tagstatus\":tagstatus,\"isshow\":isshow};\r\n    APICallController.callAPI(\"changeconfig\",sendParam,CHANGE_USER_CONFIG,resFunc,dispatch,\"タグ設定を更新しました。\");\r\n};\r\n\r\n\r\nexport const showTagAdmin=()=>dispatch=>{\r\n    const resFunc=(res)=>{\r\n        return {tag_list:res.tag_list};\r\n    };\r\n    const sendParam={};\r\n    APICallController.callAPI(\"showtagadmin\",sendParam,SHOW_TAG_ADMIN,resFunc,dispatch);\r\n};\r\n\r\nexport const makeNewTagByAdmin=(id,name,rank,type)=>dispatch=>{\r\n    const resFunc=(res)=>{\r\n        const now=new Date().getTime();\r\n        return { change:now};\r\n    };\r\n    \r\n    const sendParam={tagId:id,tagname:name,tagrank:rank,tagtype:type};\r\n    APICallController.callAPI(\"maketagadmin\",sendParam,MAKE_TAG_ADMIN,resFunc,dispatch,\"タグ追加完了しました。\");\r\n};\r\n\r\n\r\nexport const modifyTagByAdmin=(id,name,rank,type)=>dispatch=>{\r\n    const resFunc=(res)=>{\r\n        const now=new Date().getTime();\r\n        return { change:now};\r\n    };\r\n    const sendParam={tagId:id,tagname:name,tagrank:rank,tagtype:type};\r\n\r\n    console.log(\"sendParams:\", sendParam);\r\n    APICallController.callAPI(\"modifytagadmin\",sendParam,MODIFY_TAG_ADMIN,resFunc,dispatch,\"タグ修正完了しました。\");\r\n};\r\n\r\n//メモを新規追加して送信し、その結果を戻す\r\nexport const pushNewFormedMemo=(tagArray,mainText)=>dispatch=>{\r\n\r\n    const resFunc=(res)=>{\r\n        const now=new Date().getTime();\r\n        return { change:now };\r\n    };\r\n    \r\n    const sendParam={ 'settags':tagArray,'mainText':mainText,'datePublish':getTimeStampNow(),'dateRegist':getTimeStampNow() };\r\n    APICallController.callAPI(\"formattedinsert\",sendParam,MEMO_INSERT_END,resFunc,dispatch,\"登録完了しました。\");    \r\n\r\n};\r\n\r\n\r\nexport const getNoticeData=()=>dispatch=>{\r\n\r\n    const resFunc=(res)=>{\r\n        return {notices:res.notices,count:res.count};\r\n    };\r\n\r\n    APICallController.callAPI(\"getnotice\",{},GET_NOTICE_LIST,resFunc,dispatch);\r\n};\r\n\r\n\r\n//現在まで表示したデータの次のメモデータを取得して表示する\r\nexport const loadNewMemo=fromDay=>dispatch=>{\r\n\r\n    const resFunc=(res)=>{\r\n        return { timeline:res.timeline,read:res.read,fav:res.fav,endflg:res.endflg };\r\n    };\r\n    let RECORD_SET=LOAD_NEW_MEMO;\r\n\r\n    if (fromDay==-1) RECORD_SET=RESET_MEMO;\r\n\r\n    APICallController.callAPI(\"main\",{fromDay:fromDay},RECORD_SET,resFunc,dispatch);    \r\n};\r\n\r\nexport const hasreadCheck=(memoId,read)=>dispatch=>{\r\n    // const resFunc=(res)=>{\r\n    //     return { timeline:[],read:[],fav:[] };\r\n    // };\r\n    \r\n    const resFunc=(res)=>{\r\n        return { change:0 };\r\n    };\r\n    APICallController.callAPI(\"setread\",{memoId:memoId,read:read},NO_ACTION,resFunc,dispatch,\"既読チェック完了\");\r\n};\r\n\r\nexport const hasfavCheck=(memoId,fav)=>dispatch=>{\r\n    // const resFunc=(res)=>{\r\n    //     return { timeline:[],read:[],fav:[] };\r\n\r\n    // };\r\n    const resFunc=(res)=>{\r\n        return { change:0 };\r\n    };\r\n    APICallController.callAPI(\"setfav\",{memoId:memoId,fav:fav},NO_ACTION,resFunc,dispatch,\"お気に入り登録完了\");\r\n};\r\n\r\nexport const showFavorite=()=>dispatch =>{\r\n\r\n    const resFunc=(res)=>{\r\n        return { timeline:res.timeline,read:res.read,fav:res.fav,endflg:res.end };\r\n    };\r\n\r\n    APICallController.callAPI(\"favorite\",{memoId:1,fav:2},SHOW_FAVORITE,resFunc,dispatch);\r\n};\r\n\r\nexport const closeModal=props=>dispatch=>{\r\n    dispatch({type:CLOSE_MEMOMAKE});\r\n};\r\n","import {useState,useEffect} from 'react';\r\nimport { useDispatch,useSelector } from 'react-redux';\r\nimport {\r\n    Chip,\r\n    Tab,\r\n    Tabs,\r\n    TextField\r\n    } from '@material-ui/core';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { getTagInfo } from '../lib/UtilityLibrary';\r\n\r\n\r\n\r\nconst useStyles=makeStyles((theme)=>({\r\n\r\n    root: {\r\n        //display: 'flex',\r\n       // justifyContent: 'center',\r\n        flexWrap: 'wrap',\r\n        '& > *': {\r\n          margin: theme.spacing(0.5),\r\n        },\r\n        padding:\"0px 0px 0px\"\r\n      },\r\n    asummary:{\r\n        borderRadius:5,\r\n        backgroundColor:\"lightblue\",\r\n        borderColor:\"gray\",\r\n        border:\"2px\"\r\n\r\n    },\r\n    nontag:{\r\n        color:\"#ccc\",\r\n        fontSize:\"12pt\"\r\n    },\r\n    textField: {\r\n        marginLeft: theme.spacing(1),\r\n        marginRight: theme.spacing(1),\r\n        width: 200,\r\n      },\r\n    \r\n\r\n}));\r\n\r\n\r\nconst TagInputList=(props)=>{\r\n    \r\n\r\n    const classes=useStyles();\r\n    const [selected,setSelected]=useState([]);\r\n    const [value,setValue]=useState(0);\r\n    const main_tag=useSelector(state=>state.auth_login.main_tag);\r\n    const sub_tag=useSelector(state=>state.auth_login.sub_tag);\r\n    const all_tag=useSelector(state=>state.auth_login.all_tag);\r\n\r\n    const [nameSearch,setNameSearch]=useState([]);\r\n\r\n    const handleChange = (event, value) => {\r\n        setValue(value);\r\n    };\r\n\r\n\r\n    const onTagClick=(data)=>{\r\n        let nowselected=[];\r\n\r\n        if (selected.some((el)=>el===data)){\r\n            nowselected=selected.reduce((prev,current)=>{\r\n                if( current !== data) prev.push(current);\r\n                return prev;\r\n             },[]);\r\n        }else{\r\n            //中身をソートする\r\n            nowselected=[...selected,data];\r\n        }\r\n        setSelected(nowselected);\r\n        console.log(nowselected);\r\n        //dispatch(getTaggedData(nowselected,0));\r\n        props.setSelected(nowselected);\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (props.end){\r\n            setSelected([]);\r\n        }\r\n        \r\n    }, [props.end]);\r\n\r\n    \r\n    const TagSearchSet=()=>{\r\n        const onChange=(e)=>{\r\n            const str=e.target.value;\r\n            if (str==\"\") {\r\n                setNameSearch([]);\r\n                return; \r\n            }    \r\n            const resB=all_tag.filter(data=>data.strTagName.includes(e.target.value));\r\n            setNameSearch(resB);\r\n        };\r\n\r\n        return (\r\n            <div>\r\n                <TextField \r\n                    label=\"検索ワード\"\r\n                    placeholder=\"探すタグの一部を入力\"\r\n                    onChange={onChange}  \r\n                    variant=\"outlined\" />\r\n                <div>\r\n                {            \r\n                    nameSearch.map((d)=>{\r\n\r\n                        return (\r\n                            <Chip\r\n                                key={d.id}    \r\n                                variant={selected.some((el)=>el===d) ? 'outlined': 'default' }\r\n                                color={d.numTagType=== 1 ? \"secondary\" : d.numTagType=== 2 ? \"primary\" : \"default\" }\r\n                                label={d.strTagName}\r\n                                clickable\r\n                                onClick={(e)=>onTagClick(d)}\r\n                            />\r\n                        );\r\n                    })\r\n\r\n                }\r\n                </div>\r\n            </div>\r\n\r\n        );\r\n    }\r\n\r\n\r\n\r\n    const makeTagList=(list)=>{\r\n    \r\n        return  list.map((m)=>{\r\n            \r\n            const d=getTagInfo(all_tag,m.keyTag);\r\n\r\n            return (\r\n                <Chip\r\n                    key={d.id}    \r\n                    variant={selected.some((el)=>el===d) ? 'outlined': 'default' }\r\n                    color={d.numTagType=== 1 ? \"secondary\" : d.numTagType=== 2 ? \"primary\" : \"default\" }\r\n                    label={d.strTagName}\r\n                    clickable\r\n                    onClick={(e)=>onTagClick(d)}\r\n                />\r\n            );\r\n        });\r\n    };\r\n\r\n    const tagNameSearchInit=()=>{\r\n        setNameSearch([]);\r\n    }\r\n\r\n    return (\r\n    <div>\r\n        <div>\r\n            <Tabs value={value} onChange={handleChange} >\r\n                <Tab label=\"メインタグ\"  />\r\n                <Tab label=\"サブタグ\"  />\r\n                <Tab label=\"タグ検索\"  onClick={tagNameSearchInit} />\r\n                <Tab label=\"タグ非表示\"  />\r\n\r\n            </Tabs>\r\n        </div>\r\n        <div hidden={value !== 0 }  className={classes.root}> { value === 0 && makeTagList(main_tag) }</div>\r\n        <div hidden={value !== 1 }  className={classes.root}> { value === 1 &&  makeTagList(sub_tag) }</div>\r\n        <div hidden={value !== 2 }  className={classes.root}> { value === 2 &&  TagSearchSet() }</div>\r\n        \r\n        <hr/>\r\n            <span>検索タグ:  </span>\r\n            {selected.length>0 ?\r\n                selected.map((d)=>{\r\n                    return (\r\n                        <Chip \r\n                        \r\n                            key={d.id}  \r\n                            variant='default' \r\n                            color={d.numTagType=== 1 ? \"secondary\" : d.numTagType=== 2 ? \"primary\" : \"default\" }\r\n                            label={d.strTagName}\r\n                            onClick={(e)=>onTagClick(d)}\r\n                        />\r\n                    )\r\n                })\r\n            :\r\n            <span className={classes.nontag}>タグを1個以上選択してください</span>\r\n            }\r\n            \r\n        <hr/>\r\n        </div>      \r\n    )\r\n        \r\n};\r\n\r\nexport default TagInputList;","\r\nexport const TAG_IMPORTANT=1;\r\nexport const TAG_NORMAL=2;\r\nexport const TAG_DEFAULT=3;\r\n\r\nexport const TAG_NUMBER_INPUT=11;\r\nexport const TAG_DATE_INPUT=12;\r\nexport const TAG_TIME_INPUT=14;\r\nexport const TAG_DATE_TIME_INPUT=15;\r\nexport const TAG_TEXT_INPUT=13;\r\nexport const TAG_MULTILINE_INPUT=16;\r\n\r\nexport const TYPE_TAG_FUNCTION=1;\r\nexport const TYPE_TAG_MEMBER=2;\r\nexport const TYPE_TAG_GUEST=3;\r\nexport const TYPE_TAG_ACTION=4;\r\nexport const TYPE_TAG_OTHER_ELSE=5;\r\nexport const TYPE_TAG_PLACE=6;\r\n\r\n\r\nexport const TAG_TYPES=[\r\n    {id:TYPE_TAG_GUEST,name:\"利用者\"},\r\n    {id:TYPE_TAG_ACTION,name:\"業務用語\"},\r\n    {id:TYPE_TAG_PLACE,name:\"部署・場所\"},\r\n    {id:TYPE_TAG_OTHER_ELSE,name:\"施設内用語\"}\r\n    \r\n];\r\n\r\nexport const TAG_RANKS=[\r\n    {id:1000,name:\"最重要\"},\r\n    {id:100,name:\"重要\"},\r\n    {id:10,name:\"通常\"},\r\n    {id:1,name:\"表示のみ\"},\r\n]","import { TAG_TEXT_INPUT } from \"../../lib/TagTypeNames\";\r\n\r\nimport React  from 'react';\r\nimport {useSelector } from 'react-redux';\r\n\r\nconst TagText=({tagtextarray})=>{\r\n    const tag_list= useSelector(state=>state.auth_login.all_tag,[]);\r\n\r\n    let ss=\"\";\r\n\r\n    return tagtextarray.split(\",\").map((d)=>{\r\n\r\n        if (d.includes(\":\")){\r\n            const sd=d.split(\":\");\r\n            const tagname=tag_list.find(el=> el.id==sd[0]);\r\n            if( !tagname ) return  (<span> タグ不明 {d} :</span>)\r\n            \r\n            return tagname.strTagName+\":\"+sd[1];\r\n        }\r\n\r\n        const tagname=tag_list.find(el=> el.id==d );\r\n        //console.log(tagname);\r\n        if( !tagname ) return  <span> タグ不明 {d} :</span>\r\n\r\n        return  <span>{tagname.strTagName} :</span> \r\n    });\r\n};\r\n\r\nexport default  TagText;","//共通で使いそうな関数をまとめておく　stateとかは取らず　共通のデータ構造にのみ依存するように作っておく\r\nimport { useSelector } from \"react-redux\";\r\n\r\n\r\nexport const GetUserName=({id , prefix=\"\", suffix=\"\"})=>{\r\n    const user_list=useSelector(state=>state.auth_login.user_list);\r\n\r\n    const us=user_list.find(u=>u.id===id);\r\n    if (!us) return ( <span>名称未設定</span> );\r\n\r\n    return ( <span>{prefix}{us.strName} {suffix} </span> );\r\n};\r\n\r\nexport const GetTagName=({id})=>{\r\n\r\n    const tag_list= useSelector(state=>state.auth_login.all_tag,[]);\r\n    const tagname=tag_list.find(el=> el.id==id );\r\n    //console.log(tagname);\r\n    if( !tagname ) return  <span> タグ不明 {id} :</span>\r\n\r\n    return  <span>{tagname.strTagName} :</span> \r\n\r\n}\r\n\r\n","\r\nimport  {getDateMessage,getUserName} from  '../../lib/UtilityLibrary';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport TagText  from './TagText'; \r\nimport {GetUserName}  from './ShowInfoSet';\r\nconst useStyles=makeStyles((theme)=>({\r\n\r\n    root: {\r\n        display: 'flex',\r\n       // justifyContent: 'center',\r\n        flexWrap: 'wrap',\r\n        '& > *': {\r\n          margin: theme.spacing(0.5),\r\n        },\r\n        padding:\"0px 0px 0px\"\r\n      },\r\n      followarea:{\r\n          marginLeft:\"20%\",\r\n          border:'2px solid #888',\r\n          width:\"80%\",\r\n          fontSize:\"12px\"\r\n      }\r\n\r\n}));\r\n\r\n\r\nconst SummaryMemo=(props)=>{\r\n    const classes=useStyles();\r\n\r\n    return (\r\n    \r\n        <div className={classes.followarea}>\r\n            <div><span > { getDateMessage(props.data.datePublish) }</span> <GetUserName  suffix={\"より\"}  id={props.data.keySender}/></div>\r\n            < div><span>{getDateMessage(props.data.dateRegist) }</span><span> <TagText tagtextarray={props.data.strTaglist}/> </span> <span>{props.data.strMainText}</span></div>\r\n        </div>\r\n        \r\n    )\r\n\r\n};\r\n\r\nexport default SummaryMemo;","import react,{useState,useEffect,useRef} from 'react';\r\nimport { useDispatch,useSelector } from 'react-redux';\r\nimport {Modal,\r\n    TextField,\r\n    Button,\r\n    Card,\r\n    } from '@material-ui/core';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport { Fade } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport {pushNewMemo,setReplyData} from '../actions';\r\nimport {getTimeStampNow,checkHasContent} from '../lib/UtilityLibrary';\r\nimport TagInputList from './TagInputList';\r\nimport SummaryMemo from './parts/SummaryMemo';\r\nimport { DELETE_NEWFOLLOW_MODAL,DELETE_NEW_REPLY_MODAL } from '../lib/ActionTypeString';\r\n\r\n\r\n\r\nconst useStyles=makeStyles((theme)=>({\r\n\r\n    root: {\r\n        //display: 'flex',\r\n       // justifyContent: 'center',\r\n        flexWrap: 'wrap',\r\n        '& > *': {\r\n          margin: theme.spacing(0.5),\r\n        },\r\n        padding:\"0px 0px 0px\"\r\n      },\r\n    asummary:{\r\n        borderRadius:5,\r\n        backgroundColor:\"lightblue\",\r\n        borderColor:\"gray\",\r\n        border:\"2px\"\r\n\r\n    },\r\n    textField: {\r\n        marginLeft: theme.spacing(1),\r\n        marginRight: theme.spacing(1),\r\n        width: 200,\r\n      },\r\n    \r\n\r\n}));\r\n\r\n\r\nconst FreeTagInputModal=(props)=>{\r\n    \r\n\r\n    const classes=useStyles();\r\n    const [selected,setSelected]=useState([]);\r\n    const [end,setEnd]=useState(false);\r\n    \r\n    const dispatch = useDispatch();\r\n    const[hasTime,setHasTime ]=useState(false);\r\n    const [registTime,setRegistTime]=useState(\"\");\r\n    const [canSubmit,setCanSubmit]=useState(false);\r\n    const [mainText,setMainText]=useState(\"\");\r\n    const textRef=useRef(null);\r\n\r\n    useEffect(()=>{\r\n        if ( selected.length==0||mainText.length==0 || (hasTime && registTime==\"\") ){\r\n            setCanSubmit(false);\r\n        }else{\r\n            setCanSubmit(true);\r\n        }\r\n    });\r\n\r\n    const inputCheck=(text)=>{\r\n        setMainText(text);\r\n    };\r\n\r\n    const onSubmit=(text)=>{\r\n        const tagArray= selected.map((d)=>d.id);\r\n        let timeS=getTimeStampNow();\r\n        if (hasTime) timeS=registTime;\r\n        console.log(timeS,hasTime);\r\n        let follow=-1;\r\n        if(checkHasContent(props.reply_source)){\r\n\r\n            dispatch(setReplyData(tagArray.join(','),text,timeS,props.reply_source ));\r\n        }else{\r\n            if (checkHasContent(props.follow_data)) follow=props.follow_data.id;\r\n\r\n            dispatch(pushNewMemo(tagArray.join(','),text,timeS,follow ));    \r\n        }\r\n\r\n        //画面けし処理も追加する\r\n        closeAction();\r\n\r\n    };\r\n\r\n    const onClose=()=>{\r\n        closeAction();\r\n    };\r\n\r\n    const setRegistTimeManual=(str)=>{\r\n        console.log(\"time change\"+str);\r\n        setRegistTime(str);\r\n    }\r\n\r\n    const closeAction=()=>{\r\n        setSelected([]);\r\n        setRegistTime(\"\");\r\n        setHasTime(false);\r\n        setCanSubmit(false);\r\n        setMainText(\"\");\r\n        props.onClose();\r\n\r\n        if(checkHasContent( props.follow_data )) dispatch({type:DELETE_NEWFOLLOW_MODAL});\r\n        if(checkHasContent(props.reply_source)) dispatch({type:DELETE_NEW_REPLY_MODAL});\r\n    };\r\n\r\n    return (\r\n        <Modal\r\n        \r\n            aria-labelledby=\"transition-modal-title\"\r\n            aria-describedby=\"transition-modal-description\"\r\n            open={props.open }\r\n            className={classes.modal}\r\n            onClose={()=>onClose()}\r\n            closeAfterTransition\r\n        >\r\n        <Fade in={props.open}>\r\n            \r\n            <Card className={classes.root}>\r\n                { checkHasContent( props.reply_source ) && \r\n                    <div>\r\n                        <SummaryMemo data={props.reply_source}/>\r\n                        <div>下矢印</div>\r\n\r\n                    </div>\r\n                }\r\n                \r\n\r\n                <TagInputList setSelected={setSelected} end={end} />\r\n                { checkHasContent( props.follow_data ) && \r\n                    <div>\r\n                    <div>転送</div>\r\n                    <SummaryMemo data={props.follow_data}/>\r\n                    </div>\r\n                }\r\n                \r\n                <TextField\r\n                    id=\"filled-textarea\"\r\n                    label=\"入力内容\"\r\n                    inputRef={textRef}\r\n                    placeholder=\"タグは1種類以上選択しましょう\"\r\n                    multiline\r\n                    minRows={3}\r\n                    fullWidth\r\n                    onChange={(e)=>inputCheck(e.target.value)}\r\n                />\r\n                <div>\r\n                    <span>\r\n                        <Button color=\"primary\" variant=\"outlined\" onClick={()=>setHasTime(!hasTime)} > \r\n                            {!hasTime ? <span>時刻を入れる</span>  :  <span>時刻は外す</span> }  \r\n                        </Button>\r\n                    </span>\r\n                    {hasTime &&\r\n                        <span> <TextField  className={classes.textField} type=\"datetime-local\" onChange={(e)=> setRegistTimeManual(e.target.value) } /> </span>\r\n\r\n                    }\r\n                    {canSubmit ?\r\n                        <span><Button color=\"primary\" variant=\"contained\" onClick={()=>onSubmit(textRef.current.value)} >投稿</Button> </span>\r\n                        :\r\n                        <span><Button color=\"primary\" variant=\"contained\" disabled  >投稿</Button> </span>\r\n\r\n                    }\r\n                    \r\n                </div>\r\n            </Card>\r\n        </Fade>\r\n        </Modal>\r\n\r\n    )\r\n        \r\n\r\n\r\n\r\n};\r\n\r\nexport default FreeTagInputModal;","import react,{useState,useEffect,useRef} from 'react';\r\nimport { useDispatch,useSelector } from 'react-redux';\r\n\r\nimport Chip from '@material-ui/core/Chip';\r\nimport {Button, Card,TextField, Typography} from '@material-ui/core';\r\nimport Modal from '@material-ui/core/Modal';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport {pushNewFormedMemo} from '../actions';\r\n\r\nimport {TAG_DATE_INPUT,\r\n        TAG_NUMBER_INPUT, \r\n        TAG_TEXT_INPUT,\r\n        TAG_TIME_INPUT,\r\n        TAG_MULTILINE_INPUT\r\n    } from  '../lib/TagTypeNames';\r\n\r\nconst useStyles=makeStyles((theme)=>({\r\n\r\n    root: {\r\n        display: 'flex',\r\n        justifyContent: 'left-end',\r\n        flexWrap: 'wrap',\r\n        '& > *': {\r\n          margin: theme.spacing(0.5),\r\n        },\r\n      },\r\n      textField: {\r\n        marginLeft: theme.spacing(1),\r\n        marginRight: theme.spacing(1),\r\n        width: 200,\r\n      },\r\n      \r\n    modal:{\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n      \r\n    },\r\n\r\n    paper: {\r\n        position: 'absolute',\r\n        width: '80%',\r\n        backgroundColor: theme.palette.background.paper,\r\n        border: '2px solid #000',\r\n        borderRadius:\"10px\",\r\n        boxShadow: theme.shadows[5],\r\n        padding: theme.spacing(2, 4, 3),\r\n      },\r\n\r\n}));\r\n\r\n\r\n\r\nconst FormedTagPutModal=(props)=>{\r\n\r\n    const classes=useStyles();\r\n    //今まで設定したタグ\r\n\r\n    //現在選択中のタグ\r\n    const [selected,setSelected]=useState([]);\r\n    //最後以外の選択中のタグ\r\n    const [defs,setDefs]=useState([]);\r\n    //最後のタグ\r\n    const [lastOne,setLastOne]= useState({});\r\n\r\n    const textRef=useRef(null);\r\n    const textRefMain=useRef(null);\r\n    \r\n\r\n    const [open,setOpen] =useState(false);\r\n\r\n\r\n    const tag_source=useSelector(state=>state.auth_login.formatted);\r\n\r\n    const view_name=useSelector(state=>state.setview);\r\n\r\n    //const tag_source=props.data;\r\n    //選択候補のタグ\r\n    const [tagArray,setTagArray]=useState([]);\r\n    const dispatch = useDispatch();\r\n\r\n    \r\n    // useEffect(()=>{\r\n    //     console.log(\"タグ獲得開始\");\r\n    //     dispatch(tag_start());\r\n    // },[]);\r\n\r\n    \r\n    useEffect(()=>{\r\n    //    setOpen(props.open);\r\n        //console.log(\"タグ整理開始\",tag_source);\r\n        searchTagArray();\r\n    },[selected,tag_source]);\r\n\r\n    \r\n    //モダルを閉じるとき　全てのリストを整理してから自分を閉じる\r\n    const onClose=()=>{\r\n        setSelected([]);\r\n        setDefs([]);\r\n        setLastOne({});\r\n        setOpen(false);\r\n        props.onClose();\r\n    };\r\n\r\n\r\n    //Setを利用した積集合作成関数\r\n    const  intersection = (setA, setB)=> {\r\n        let _intersection = new Set();\r\n        for (let elem of setB) {\r\n            if (setA.has(elem)) {\r\n                _intersection.add(elem);\r\n            }\r\n        }\r\n        return _intersection;\r\n    };\r\n\r\n\r\n    const searchTagArray=()=>{\r\n        if(!tag_source || tag_source.length===0) return;\r\n        \r\n        //現在取得しているリストをSetに変換、比較に使う\r\n        const nowTag=new Set(selected.map((d)=>{return d.keyTagMain.id;}));\r\n\r\n        const nowGroup=new Set(selected.map((d)=>{return d.strGroup;}));\r\n\r\n        const newTagArray=[];\r\n        let phaseNow=selected.reduce((acc,value)=>(acc<value.numTagPhase ? value.numTagPhase : acc),0);\r\n\r\n        const showArray=(str)=>{\r\n            const s=str.split(\",\")\r\n            if (s==[]) return [];\r\n            return s.map((d)=>parseInt(d));\r\n        }\r\n  \r\n        tag_source.forEach(element => {\r\n            //要素のdelに現在\r\n            let showFlg=false;\r\n            //新規タグの表示条件に選択中のタグが入っていたら表示候補にする\r\n            const hasEl=new Set(showArray(element.strShow));\r\n            if(intersection(hasEl,nowTag).size>0)  showFlg=true;\r\n\r\n            //自分自身がすでに選択されていたら候補に入れない\r\n            if(nowTag.has(element.id))  showFlg=false;  \r\n            //すでにグループの項目が設定されていたら候補に入れない\r\n            if(element.strGroup && nowGroup.has(element.strGroup)){\r\n                showFlg=false;\r\n            }               \r\n\r\n            //表示条件に該当したら選択候補に追加する\r\n            if(showFlg) newTagArray.push(element);\r\n        \r\n        });\r\n\r\n        //選択候補があったらそのまま選択候補を表示に回す\r\n        if(newTagArray.length>0){\r\n            setTagArray(newTagArray);\r\n            return;    \r\n        }\r\n        \r\n        //選択肢がなかった場合、一度Phaseを上げて再度探してみる\r\n        phaseNow+=1;\r\n        //この際はフェーズが合えば非表示でなければすべて表示する\r\n        tag_source.forEach(element => {\r\n            if(element.numTagPhase===phaseNow){\r\n                const delEl=new Set(element.del);    \r\n                if(intersection(delEl,nowTag).size===0) newTagArray.push(element);\r\n            }\r\n\r\n        });\r\n        setTagArray(newTagArray);\r\n    };\r\n\r\n    //selectedの新規内容をstateの書く場所に設置する\r\n    const putSelectedInPlace=(data)=>{\r\n        const ss=Object.assign([],data);\r\n        setSelected(data);\r\n        if (data.length==0){\r\n            setDefs([]);\r\n            setLastOne({});\r\n            return;\r\n        }\r\n        const la=ss.pop();\r\n        setDefs(ss);\r\n        setLastOne(la);\r\n\r\n    };\r\n\r\n\r\n    const onClick=(data)=>{\r\n        let nowselected=[...selected,data];\r\n        putSelectedInPlace(nowselected);\r\n    };\r\n\r\n    const onDelete=()=>{\r\n        let nowselected=Object.assign([],selected);\r\n        const ts=nowselected.pop();\r\n        putSelectedInPlace(nowselected);\r\n    };\r\n\r\n    const onDecide=(data,txt)=>{\r\n        let copy=Object.assign({},data);\r\n        console.log(\"copy\",copy);\r\n        copy.keyTagMain.strTagName=copy.keyTagMain.strTagName+\":\"+txt;\r\n        let nowselected=[...selected,copy];\r\n        putSelectedInPlace(nowselected);\r\n    };\r\n\r\n    const sendAction=(text)=>{\r\n        const restagarray=selected.map((d)=>{\r\n            if (d.keyTagMain.strTagName.includes(\":\")){\r\n                const st=d.keyTagMain.strTagName.replace(/.+\\:/, \":\");\r\n                return d.keyTagMain.id+st; \r\n            }else{\r\n                return d.keyTagMain.id;\r\n            }\r\n        });\r\n\r\n        //console.log(\"restagarray\",restagarray);\r\n        dispatch(pushNewFormedMemo(restagarray.join(\",\"),text));\r\n    }\r\n\r\n    const closeAction=()=>{\r\n        setSelected([]);\r\n        setDefs([]);\r\n        setLastOne({});\r\n    }\r\n\r\n    const onEnd=(text)=>{\r\n        //console.log(\" ここで終わり　処理をDispatchする \");\r\n        sendAction(text);\r\n        closeAction();\r\n        \r\n        props.onClose();\r\n    };\r\n    \r\n    const onContinue=(text)=>{\r\n        sendAction(text);\r\n        closeAction();    };\r\n\r\n    const handleClose=()=>{\r\n        //setOpen(false);\r\n        closeAction();\r\n        props.onClose();\r\n    }\r\n\r\n\r\n    const TagButton=(data)=>{\r\n       return (\r\n            <Chip    \r\n                variant={selected.some((el)=>el===data) ? 'outlined': 'default' }\r\n                color={ secondarySet.includes(data.keyTagMain.numTagType) ? \"secondary\" : 　primarySet.includes(data.keyTagMain.numTagType) ? \"primary\" : \"default\"}\r\n                        \r\n                label={data.keyTagMain.strTagName}\r\n                clickable\r\n                onClick={(e)=>onClick(data)}\r\n            />\r\n\r\n       )\r\n    };\r\n\r\n    //複数行入力のテキストボックスが分岐で作成できなかったので別関数にする\r\n    const multilineText=(data)=>{\r\n        return (\r\n            <div>\r\n                <TextField\r\n                    //id=\"standard-number\"\r\n                    label={data.name}\r\n                    inputRef={textRef}\r\n                    className={classes.textField}\r\n                    type={\"text\"}\r\n                    multiline\r\n                    rows= {4} \r\n                    InputLabelProps={{\r\n                        shrink: true, }}\r\n                    defaultValue={\"\"}\r\n                    //onChange={(e)=>onInput(e)}\r\n                />\r\n                <Button size={\"small\"} variant='contained' color=\"primary\" onClick={()=>onDecide(data, textRef.current.value)}>次へ</Button>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const CheckSpecialTag=(data)=>{\r\n        let inputType=\"none\";\r\n        let defaultValue=\"none\";\r\n        console.log(\"CheckSpecialTag\",data);\r\n        \r\n        const date=new Date();\r\n        switch (data.keyTagMain.numTagType){\r\n            case TAG_NUMBER_INPUT:\r\n                inputType=\"number\";\r\n                defaultValue=0;\r\n                break;\r\n            case TAG_TEXT_INPUT:\r\n                inputType=\"text\";\r\n                defaultValue=\"\";\r\n                break;\r\n        \r\n            case TAG_MULTILINE_INPUT:\r\n                return multilineText(data);\r\n\r\n            case TAG_DATE_INPUT:\r\n                inputType=\"date\";\r\n                defaultValue=date.getFullYear()+\"-\"+(\"0\"+(date.getMonth()+1)).slice(-2)+\"-\"+(\"0\"+date.getDate()).slice(-2);\r\n                break;\r\n\r\n            case TAG_TIME_INPUT:\r\n                \r\n                inputType=\"time\";\r\n                defaultValue=(\"0\"+(date.getHours())).slice(-2)+\":\"+(\"0\"+date.getMinutes()).slice(-2);\r\n                break;\r\n            default :\r\n                return (\r\n                    TagButton(data)\r\n                );\r\n        }\r\n\r\n\r\n        //MULTILINE以外は納めることが出来るのでまとめておく\r\n        return (\r\n            <div>\r\n                <TextField\r\n                    //id=\"standard-number\"\r\n                    label={data.name}\r\n                    inputRef={textRef}\r\n                    className={classes.textField}\r\n\r\n                    type={inputType}\r\n                    InputLabelProps={{\r\n                        shrink: true, }}\r\n                    defaultValue={defaultValue}\r\n                    //onChange={(e)=>onInput(e)}\r\n                />\r\n                <Button size={\"small\"} variant='contained' color=\"primary\" onClick={()=>onDecide(data, textRef.current.value)}>次へ</Button>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    \r\n    const secondarySet=[1]\r\n    const primarySet=[2,3,4,11]\r\n\r\n    return (\r\n        <Modal\r\n\r\n            className={classes.modal}\r\n            open={props.open}\r\n            onClose={handleClose}\r\n            aria-labelledby=\"simple-modal-title\"\r\n            aria-describedby=\"simple-modal-description\"\r\n            closeAfterTransition\r\n        >\r\n            <div className={classes.paper}>\r\n            \r\n            <div className={classes.root}>\r\n                <div><Typography variant='h6' >簡単情報入力フォーム</Typography> </div>\r\n                <hr/>\r\n                <div>\r\n                {defs.length>0 ?\r\n                    defs.map((d)=>{\r\n                        \r\n                    //console.log(d);\r\n                        return (\r\n                            <Chip    \r\n                                variant='default' \r\n                                color={ secondarySet.includes(d.keyTagMain.numTagType) ? \"secondary\" : 　primarySet.includes(　d.keyTagMain.numTagType) ? \"primary\" : \"default\" }\r\n                                label={d.keyTagMain.strTagName}\r\n                            />\r\n                        )\r\n                    })\r\n                    :\r\n                    <div/>\r\n                }\r\n                </div>\r\n                { Object.keys(lastOne).length>0 ?    \r\n                    <Chip    \r\n                        variant='outlined'\r\n                        color={ secondarySet.includes(lastOne.keyTagMain.numTagType) ? \"secondary\" : 　primarySet.includes(　lastOne.keyTagMain.numTagType) ? \"primary\" : \"default\"}\r\n                        label={lastOne.keyTagMain.strTagName}\r\n                        clickable\r\n                        onClick={(e)=>onDelete(lastOne)}\r\n                    />\r\n                    :\r\n                    \r\n                    <div>登録内容を選択してください</div>\r\n\r\n                }\r\n            </div>\r\n            <hr/>\r\n\r\n            <div className={classes.root}>\r\n\r\n            {\r\n            tagArray.length===1 ?\r\n                \r\n                CheckSpecialTag(tagArray[0])\r\n            :tagArray.length>0 ?\r\n                tagArray.map((d)=>{\r\n                    return (\r\n                        TagButton(d)    \r\n                    )\r\n                })\r\n            :\r\n                // 次への選択肢が一切なくなったら\r\n                <div>\r\n                    <div>\r\n                        {/* 最後に文章を書けるようにしておく */}\r\n                        <TextField\r\n                        //id=\"standard-number\"\r\n                        inputRef={textRefMain}\r\n                        className={classes.textField}\r\n\r\n                        label=\"補足\"\r\n                        placeholder=\"特に書くことがなければ登録ボタンを押してください\"\r\n                        InputLabelProps={{\r\n                            shrink: true, }}\r\n                        //onChange={(e)=>onInput(e)}\r\n                    />\r\n                    </div>\r\n                    <div>\r\n\r\n\r\n                        <Button size={\"small\"} variant='contained' color=\"primary\" onClick={()=>onEnd(textRefMain.current.value)}>登録</Button>\r\n                        <Button size={\"small\"} variant='contained' color=\"secondary\" onClick={()=>onContinue()}>さらに登録</Button>\r\n                    </div>\r\n                </div>\r\n            }\r\n            </div>\r\n        </div>\r\n\r\n        </Modal>\r\n    )\r\n};\r\n\r\nexport default FormedTagPutModal;","import axios from \"axios\";\r\nimport { API_URL } from \"../../lib/ServiceConfig\";\r\nimport { Typography } from \"@material-ui/core\";\r\nimport {GoogleLogin,GoogleLogout} from 'react-google-login';\r\nimport { Button } from \"@material-ui/core\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useState,useEffect } from \"react\";\r\nimport {CONNECT_ERROR,ERROR_RESET, MEMO_END} from '../../lib/ActionTypeString';\r\n\r\n\r\nconst googleClientId = process.env.REACT_APP_GOOGLE_CLIENT_ID;\r\nconst drfClientId = process.env.REACT_APP_DRF_CLIENT_ID;\r\nconst drfClientSecret = process.env.REACT_APP_DRF_CLIENT_SECRET;\r\n\r\nexport const LoginButton=({red, callback})=>{\r\n    const [redirect ,setRedirect]=useState(red);\r\n    const dispatch = useDispatch();\r\n    const history=useHistory();\r\n\r\n    const SetAuthConnection = (response) => {\r\n        axios.post(`${API_URL}/auth/convert-token`, {\r\n            token: response.accessToken,\r\n            backend: \"google-oauth2\",\r\n            grant_type: \"convert_token\",\r\n            client_id: drfClientId,\r\n            client_secret: drfClientSecret,\r\n        })\r\n        .then((res) => {\r\n            const { access_token, refresh_token } = res.data;\r\n            localStorage.setItem(\"access_token\", access_token);\r\n            localStorage.setItem(\"refresh_token\", refresh_token);\r\n            \r\n            history.push(\"/main\");\r\n        })\r\n        .catch((err) => {\r\n            console.log(\"Error Google login\", err);\r\n            dispatch({type:CONNECT_ERROR});\r\n        });\r\n    };\r\n    \r\n\r\n\r\n    return(\r\n        <div>\r\n            <GoogleLogin\r\n            clientId={googleClientId}\r\n            buttonText=\"LOGIN WITH GOOGLE\"\r\n            onSuccess={(response) => SetAuthConnection(response)}\r\n            render={(renderProps) => (\r\n            <Button\r\n                onClick={renderProps.onClick}\r\n                disabled={renderProps.disabled}\r\n                variant=\"contained\"\r\n                color='primary'\r\n                type=\"button\"\r\n                class=\"login-with-google-btn\"\r\n            >\r\n                <Typography variant=\"h6\" gutterBottom >\r\n                ログイン\r\n                </Typography>\r\n            </Button>\r\n            )}\r\n            onFailure={(err) => dispatch({type:CONNECT_ERROR})}\r\n            />\r\n        </div>\r\n\r\n    )\r\n    \r\n}\r\n\r\nexport const LogOutButton=(props)=>{\r\n    const dispatch = useDispatch();\r\n    const history=useHistory();\r\n    const handleLogOutAction = () => {\r\n        localStorage.setItem(\"access_token\", \"\");\r\n        localStorage.setItem(\"refresh_token\", \"\");\r\n        dispatch({type:ERROR_RESET});\r\n        dispatch({type:MEMO_END})\r\n        history.push(\"/logout\");    \r\n    };\r\n    \r\n    return(\r\n        <div>\r\n            <GoogleLogout\r\n                clientId={googleClientId}\r\n                buttonText=\"Logout\"\r\n                icon={false}\r\n                onLogoutSuccess={()=>handleLogOutAction()}\r\n            >\r\n                <Button\r\n                        onClick={handleLogOutAction}\r\n                        variant=\"contained\"\r\n                        color=\"secondary\"\r\n                        type=\"button\"\r\n                        //class=\"login-with-google-btn\"\r\n                >\r\n                ログアウト\r\n                </Button>\r\n            </GoogleLogout>\r\n\r\n        </div>\r\n  \r\n    )\r\n}\r\n\r\n\r\n     ","import React from 'react';\r\nimport {useSelector,useDispatch}  from 'react-redux';\r\n//import { Link } from '@material-ui/core';\r\nimport { Link,useHistory } from 'react-router-dom';\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport {LogOutButton} from './parts/AuthButtons';\r\nimport { Typography } from '@material-ui/core';\r\n\r\n\r\n\r\nconst menuStyle=makeStyles((theme)=>({\r\n    door:{\r\n      width:\"100%\"\r\n    },\r\n    \r\n    loginButtonBefore:{\r\n        animation: \"$flash 4s linear infinite\",\r\n        background:'gray'\r\n      },\r\n\r\n      listShelf: {\r\n        padding: 0,\r\n        //position: \"relative\"\r\n      },\r\n      \r\n      column: {\r\n        color: \"#2d8fdd\",\r\n        borderLeft: \"solid 6px #2d8fdd\",/*左側の線*/\r\n        background: \"#f1f8ff\",/*背景色*/\r\n        marginBottom: \"3px\",/*下のバーとの余白*/\r\n        lineHeight: 1.5,\r\n        padding: \"0.5em\"\r\n      }\r\n\r\n}));\r\n\r\nconst SideMenu=({onClose=null})=>{\r\n    const dispatch=useDispatch();\r\n    const classes=menuStyle();\r\n    const history=useHistory();\r\n    const userRank=useSelector(state=>state.auth_login.userRank);\r\n\r\n    const onMove=(path=\"none\")=>{\r\n        console.log(\"close\");\r\n        if (path!==\"none\"){\r\n          history.push(path);\r\n        }\r\n        if (onClose){\r\n          onClose();\r\n        }\r\n\r\n    };\r\n\r\n    const menuList=[\r\n      {path:\"/favorite\" , name:\"お気に入り一覧\"},\r\n      {path:\"/notice\" , name:\"通知一覧\"},\r\n      {path:\"/tagconfig\" , name:\"タグ設定\"},\r\n    ];\r\n\r\n    return (\r\n        <div>\r\n            <div className={classes.listShelf}>\r\n            <div className={classes.column}>\r\n            <LogOutButton />\r\n            </div>\r\n            {\r\n              menuList.map((menu)=>(\r\n                <div className={classes.column} onClick={()=>onMove(menu.path)}><Typography variant='subtitle1' gutterBottom > {menu.name} </Typography></div>\r\n              ))\r\n            }\r\n            {userRank>1 ?\r\n              <div className={classes.column} onClick={()=>onMove(\"/tagadmin\")}><Typography variant='subtitle1' gutterBottom > タグ管理メニュー </Typography></div>\r\n              :\r\n              <div/>\r\n            }\r\n\r\n          </div>\r\n        </div>\r\n\r\n    )\r\n    \r\n}\r\n\r\nexport default SideMenu;\r\n        ","import React,{useEffect,useState} from 'react';\r\nimport {useSelector,useDispatch}  from 'react-redux';\r\n//import { Link } from '@material-ui/core';\r\nimport { Link,useHistory } from 'react-router-dom';\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport SideMenu from './SideMenu';\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\r\nimport Drawer  from '@material-ui/core/Drawer';\r\nimport {OPEN_PASSWORD}  from '../lib/ActionTypeString';\r\nimport {LogOutButton} from './parts/AuthButtons';\r\n\r\n\r\nconst drawerWidth=240;\r\n\r\nconst menuStyle=makeStyles((theme)=>({\r\n    door:{\r\n      width:\"100%\"\r\n    },\r\n    \r\n    loginButtonBefore:{\r\n        animation: \"$flash 4s linear infinite\",\r\n        background:'gray'\r\n  \r\n  \r\n      },\r\n\r\n      listShelf: {\r\n        padding: 0,\r\n        position: \"relative\"\r\n      },\r\n      \r\n      column: {\r\n        color: \"#2d8fdd\",\r\n        borderLeft: \"solid 6px #2d8fdd\",/*左側の線*/\r\n        background: \"#f1f8ff\",/*背景色*/\r\n        marginBottom: \"3px\",/*下のバーとの余白*/\r\n        lineHeight: 1.5,\r\n        padding: \"0.5em\"\r\n      }\r\n\r\n}));\r\n\r\nconst SideDrawer=(props)=>{\r\n    const dispatch=useDispatch();\r\n    const classes=menuStyle();\r\n    const history=useHistory();\r\n\r\n    //console.log(\" props.ismobile in drawer\",props.isMobile);\r\n\r\n    return (\r\n        <Drawer \r\n          anchor={\"left\"}\r\n          width={200}          \r\n          variant={ props.mobile ? \"temporary\" :\"permanent\" }\r\n          open={props.open} \r\n          onClose={props.onClose}\r\n          >\r\n            {props.mobile &&\r\n              <IconButton onClick={()=>props.onClose()} ><ArrowBackIcon/></IconButton>\r\n            }\r\n            <SideMenu  onClose={ props.mobile &&  props.onClose }/>\r\n      </Drawer>\r\n\r\n    )\r\n    \r\n}\r\n\r\nexport default SideDrawer;\r\n        ","import React ,{useEffect} from 'react';\r\nimport {useSelector} from 'react-redux';\r\nimport  {useSnackbar} from 'notistack';\r\n\r\n\r\nconst FeedbackSnackbar=()=> {\r\n\r\n    const {enqueueSnackbar}= useSnackbar();\r\n    const snacklist=useSelector(state=>state.notice_main.snack);\r\n\r\n    useEffect(() => {\r\n        //console.log(\"SNACK!!\");\r\n        if(snacklist.length>0){\r\n\r\n           enqueueSnackbar(snacklist.slice(-1)[0],{ variant: 'info',autoHideDuration:1000});\r\n\r\n        }\r\n    \r\n    }, [snacklist]);\r\n\r\n    return null;\r\n}\r\n\r\nexport default FeedbackSnackbar;","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport {Chip} from '@material-ui/core';\r\nimport {TYPE_TAG_GUEST,TYPE_TAG_MEMBER} from '../../lib/TagTypeNames'; \r\nimport FaceIcon from '@material-ui/icons/Face';\r\nimport TagFacesIcon from '@material-ui/icons/TagFaces';\r\nimport { makeStyles,createStyles,Theme } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles((theme) =>\r\n  ({\r\n    funcColor:{\r\n        color:\"red\",\r\n      borderColor:\"red\"\r\n    }, \r\n    staffColor:{\r\n      color:\"green\",\r\n      borderColor:\"green\"\r\n    },\r\n    guestColor:{\r\n      color:\"gold\",\r\n      borderColor:\"gold\"\r\n    },\r\n    placeColor:{\r\n        color:\"blue\",\r\n        borderColor:\"blue\"\r\n    },\r\n    actionColor:{\r\n        color:\"blue\",\r\n        borderColor:\"blue\"\r\n    },\r\n  }));\r\n\r\nexport const TagChip=({d})=>{\r\n    const tag_source=useSelector(state=>state.auth_login.all_tag);\r\n\r\n    const classes=useStyles();\r\n\r\n    const colorPalette=[\r\n        \"info\",\r\n        classes.staffColor,\r\n        classes.guestColor,\r\n        classes.placeColor,\r\n        classes.actionColor\r\n    ];\r\n    //console.log(\"tagchip\", d);\r\n\r\n    const sd=d.split(\":\");\r\n    const tagdata=tag_source.find(el=> el.id==sd[0]);\r\n    //console.log(\"data:\" ,tagdata);\r\n    let name=\"\";\r\n    \r\n    if( !tagdata|| typeof(tagdata)=='undefined'){\r\n        return (<Chip label={\"不明\"}/>)\r\n    }else if (sd.length==2){\r\n        name= tagdata.strTagName+\":\"+sd[1];\r\n    }else{\r\n        name=tagdata.strTagName;\r\n    }\r\n\r\n    return (\r\n        <>\r\n        <Chip\r\n            \r\n            icon={tagdata.numTagType===TYPE_TAG_GUEST ?\r\n                <FaceIcon/>                            \r\n                : tagdata.numTagType===TYPE_TAG_MEMBER &&\r\n                <TagFacesIcon/>\r\n                \r\n            }\r\n\r\n            variant=\"outlined\"\r\n            size='small'\r\n            className={colorPalette[(tagdata.numTagType)-1] }\r\n            label={name}\r\n            />\r\n        </>\r\n    )\r\n\r\n}\r\n\r\nexport const TagChipList=({listStr})=>{\r\n    const list=listStr.split(\",\");\r\n\r\n    return(\r\n        list.map((d)=>{\r\n            return (<TagChip d={d} />)\r\n        })\r\n    \r\n    )\r\n\r\n}\r\n","//各メモの表示を行う\r\n\r\n\r\n//初期状態メモヘッダーのみ表示\r\n\r\n//ヘッダーから開閉イベントを受けたら詳細をアニメーションで展開する\r\n\r\nimport React ,{useState,useRef} from 'react';\r\nimport {useSelector,useDispatch} from 'react-redux';\r\nimport {useHistory} from 'react-router-dom';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\n\r\nimport {IconButton,Box, Button}  from '@material-ui/core';\r\nimport {Menu,MenuItem} from '@material-ui/core';\r\n\r\nimport {DoubleArrowOutlined} from '@material-ui/icons';\r\nimport ReplyTwoToneIcon from '@material-ui/icons/ReplyTwoTone';\r\nimport AddCircleOutlineTwoToneIcon from '@material-ui/icons/AddCircleOutlineTwoTone';\r\nimport CheckBoxTwoToneIcon from '@material-ui/icons/CheckBoxTwoTone';\r\nimport CheckBoxOutlineBlankTwoToneIcon from '@material-ui/icons/CheckBoxOutlineBlankTwoTone';\r\nimport StarTwoToneIcon from '@material-ui/icons/StarTwoTone';\r\nimport StarBorderTwoToneIcon from  '@material-ui/icons/StarBorderTwoTone';\r\nimport { Typography } from '@material-ui/core';\r\nimport TagFaces from '@material-ui/icons/TagFaces';\r\n\r\nimport  {getDateMessage} from  '../lib/UtilityLibrary';\r\nimport {TagChipList} from './parts/TagChip';\r\nimport {MAKE_NEWFOLLOW_MODAL,MAKE_NEW_REPLY_MODAL} from '../lib/ActionTypeString';\r\nimport {hasreadCheck,hasfavCheck,editMemo, deleteMemo} from '../actions';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n\r\n\r\n    memo:{            \r\n        width: '90%',\r\n        backgroundColor: theme.palette.background.paper,\r\n        padding: theme.spacing(1,2),\r\n        borderTop: '2px solid #ccc',\r\n        fontSize:'15px'\r\n      },\r\n      ulbutton:{\r\n        display:\"flex\",\r\n        listStyle:\"none\",\r\n        align:\"flex-end\",  \r\n    },\r\n    \r\n    topset:{\r\n        display:\"flex\",\r\n        justifyContent:\"space-between\"\r\n\r\n    },\r\n    menuButton:{\r\n        spacing:'10px',\r\n    },\r\n    toName:{\r\n        textAlign:\"right\",\r\n    },\r\n    todatePublish:{\r\n        textAlign:\"right\",\r\n    },\r\n    toFooter:{\r\n        margin:\"0 0 0 auto\"\r\n    },\r\n\r\n    icons:{\r\n        justifyContent: \"flex-end\",\r\n    },\r\n\r\n    headertext:{\r\n        justifyContent: \"flex-start\",  \r\n    },\r\n\r\n    libutton:{\r\n        margin:10\r\n    },\r\n\r\n    followarea:{\r\n        marginLeft:\"20%\",\r\n        border:'2px solid #888',\r\n        width:\"80%\",\r\n        fontSize:\"12px\"\r\n    },\r\n\r\n    editable:{\r\n        border:\"2px solid\",\r\n        borderColor:\"#ffd700\",\r\n        borderRadius:\"10px\",\r\n       \r\n        focus:{\r\n            outline:\"none\"\r\n        }\r\n    },\r\n    deleted:{\r\n        textAlign:\"center\",\r\n        verticalAlign:\"middle\",\r\n        display:\"table-cell\",\r\n        height:\"50px\",\r\n        borderRadius:\"5px\",\r\n        backgroundColor:\"#ddd\",\r\n        color:\"#888\",\r\n        fontStyle:\"italic\"\r\n\r\n    }\r\n\r\n  }));\r\n\r\n\r\n\r\nconst MemoColumn=({data,read,fav})=>{\r\n    //console.log(props);\r\n    const TEXT_LIMIT=40;\r\n    const [anchorEl,setAnchorEl]=useState(null);\r\n    const menuOpen=Boolean(anchorEl);\r\n\r\n    const [editable,setEditable]=useState(false);\r\n    const [bdelete,setDelete]=useState(false);\r\n    const [editText,setEditText]=useState(data.strMainText);\r\n    //const editform=useRef(data.strMainText.replace(/\\n/g,'<br>'));\r\n    \r\n    const userId = useSelector(state => state.auth_login.userId,-1);\r\n    const user_list = useSelector(state => state.auth_login.user_list,[]);\r\n\r\n    const [expanded ,setExpanded]=useState(false);\r\n    const [isFav, setFavorite] = useState(fav.includes(data.id));\r\n    const [hasRead, setRead] = useState(read.includes(data.id));\r\n    \r\n    const history=useHistory();\r\n    const classes=useStyles();\r\n    const dispatch= useDispatch();\r\n\r\n    const onFavClick=()=>{\r\n        setFavorite(!isFav);\r\n        dispatch(hasfavCheck(data.id,!isFav));\r\n    };\r\n\r\n    const onReadClick=()=>{\r\n        setRead(!hasRead);\r\n        dispatch(hasreadCheck(data.id,!hasRead));\r\n    };\r\n\r\n     const getNames=(arr)=>{\r\n         //console.log(\"arr:\", arr);\r\n         const ars=String(arr).split(\",\");\r\n         const names=ars.map((d)=>{\r\n             if( String(userId) ===d ) return \"自分\";\r\n\r\n            const tg=user_list.find((el)=>el.id===parseInt(d));\r\n            //console.log(\"tg\",tg);\r\n            if (typeof(tg)==\"undefined\") return \"不明\";\r\n            return tg.strName;\r\n         });\r\n         \r\n         return names.reduce((acc,value)=>acc+\",\"+value);\r\n     };\r\n\r\n\r\n     const MainText=()=>{\r\n        const txtSource=data.strMainText;\r\n\r\n        if (txtSource.length<TEXT_LIMIT) return (\r\n            <div style={{whiteSpace: 'pre-line'}}>\r\n               <Typography variant='body1' >{txtSource}</Typography>\r\n            </div>); \r\n\r\n        return (\r\n            <div>\r\n            {expanded?\r\n                <div>\r\n                    <span style={{whiteSpace: 'pre-line'}} ><Typography variant='body1' >{txtSource}</Typography></span>\r\n                    <span onClick={()=>setExpanded(false)} ><Typography variant='body1' ><b>元に戻す</b></Typography></span>\r\n                </div>\r\n            :\r\n            <div>\r\n                <span style={{whiteSpace: 'pre-line'}}><Typography variant='body1' >{txtSource.substring(0,TEXT_LIMIT)}....</Typography></span>\r\n                <span onClick={()=>setExpanded(true)} ><Typography variant='body1' ><b>残りを開く</b></Typography></span>\r\n            </div>\r\n            }\r\n            </div>\r\n        )\r\n    };\r\n\r\n     const MemoManipulate=()=>{\r\n         const openFunc=()=>{\r\n            setEditable(true);\r\n            setAnchorEl(null);\r\n         }\r\n    \r\n        const menuClick=(e)=>{\r\n            setAnchorEl(e.currentTarget);            \r\n        };\r\n\r\n        const menuClose=()=>{\r\n            setAnchorEl(null);\r\n        }\r\n        const startDelete=()=>{\r\n            setDelete(true);\r\n            setAnchorEl(null);\r\n        }\r\n\r\n         return(\r\n             <span>\r\n            <IconButton edge=\"start\" color=\"inherit\" onClick={menuClick} ><TagFaces/></IconButton>\r\n            <Menu\r\n            id=\"basic-menu\"\r\n            anchorEl={anchorEl}\r\n            open={menuOpen}\r\n            onClose={menuClose}\r\n            MenuListProps={{\r\n              'aria-labelledby': 'basic-button',\r\n            }}\r\n            >\r\n                <MenuItem onClick={()=>openFunc(data.strMainText)}>メモを修正</MenuItem>\r\n                <MenuItem onClick={startDelete}>メモを削除</MenuItem>\r\n            </Menu>\r\n          </span>\r\n         )\r\n     }\r\n\r\n    const EditableColumn=(str)=>{\r\n        \r\n        const checkEditable=(str)=>{\r\n            setEditText(str);\r\n        }\r\n        const cancelEditable=()=>{\r\n            setEditable(false);\r\n        }\r\n\r\n        const onEditEnd=()=>{\r\n        \r\n            const sendTxt=editText.replace(/<br>/g,'\\n');\r\n            dispatch(editMemo(data.id,sendTxt));\r\n            setEditable(false);    \r\n        }\r\n    \r\n        return(\r\n            <Box >\r\n                <div>\r\n                <div><Typography variant='h6' >編集</Typography></div>\r\n                <div className={classes.editable}>\r\n                 <span  contentEditable dangerouslySetInnerHTML={{__html:data.strMainText.replace(/\\n/g,'<br>')}} onInput={(e)=>checkEditable(e.target.innerHTML)} />\r\n                 </div>\r\n                </div>\r\n                <div className={classes.toFooter}>\r\n                    <span><Button color=\"primary\" variant=\"contained\" onClick={()=>onEditEnd()} ><Typography variant='button' >投稿</Typography></Button> </span>\r\n                    <span><Button color=\"default\" variant=\"contained\" onClick={()=>cancelEditable()} ><Typography variant='button' >キャンセル</Typography></Button> </span>\r\n                </div>\r\n            \r\n            </Box>\r\n        )\r\n     };\r\n\r\n\r\n\r\n    const DeleteColumn=()=>{\r\n        \r\n        const cancelDelete=()=>{\r\n            setDelete(false);\r\n   \r\n        }\r\n        const onDeleteEnd=()=>{\r\n            dispatch(deleteMemo(data.id));    \r\n        }\r\n    \r\n        return(\r\n            <Box >\r\n                <div><Typography variant='h6' >このメモを削除する</Typography></div>\r\n                <div className={classes.toFooter}>\r\n                    <span><Button color=\"primary\" variant=\"contained\" onClick={()=>onDeleteEnd()} ><Typography variant='button' >削除</Typography></Button> </span>\r\n                    <span><Button color=\"default\" variant=\"contained\" onClick={()=>cancelDelete()} ><Typography variant='button' >キャンセル</Typography></Button> </span>\r\n                </div>\r\n            \r\n            </Box>\r\n        )\r\n     };\r\n\r\n\r\n\r\n    return (\r\n        <div>\r\n\r\n                <Box className={classes.memo}>\r\n                    <div className={classes.topset} >\r\n                        <span className={classes.headertext}>\r\n                        <div><Typography variant='h6' >{getDateMessage(data.dateRegist) }</Typography></div>\r\n                        <div><Typography variant='subtitle2' >{getNames(data.keySender)}より </Typography></div> \r\n                        </span>\r\n                        <span className={classes.ulbutton}>\r\n                            <span className={classes.ulbutton}>\r\n                                <IconButton onClick={!hasRead ?  onReadClick : ()=>{} }>\r\n                                    {hasRead ? (<CheckBoxTwoToneIcon/>  ):( <CheckBoxOutlineBlankTwoToneIcon/>)}\r\n                                </IconButton>\r\n                            </ span>\r\n                        \r\n                            <span className={classes.icons} >\r\n                                <IconButton onClick={onFavClick} >\r\n                                    {isFav ? ( <StarTwoToneIcon/> ):( <StarBorderTwoToneIcon/> )}\r\n                                </IconButton>\r\n                            \r\n                            </span>\r\n\r\n                            {userId===data.keySender & !data.boolHasDeleted ?\r\n                                <span className={classes.icons} >\r\n                                    {MemoManipulate()}\r\n                                </span>\r\n                                :\r\n                                <span/>\r\n                            }\r\n                        </span>\r\n                    </div>\r\n                          \r\n                    {!editable ?\r\n                        <div>\r\n                            <div><span > <TagChipList listStr={data.strTaglist} /></span></div>\r\n                            { data.boolHasDeleted ?\r\n                                <div className={classes.deleted}><Typography variant='h6' >このメモは削除されました</Typography></div>\r\n                              :\r\n                                MainText()\r\n                              \r\n                            } \r\n\r\n                        </div>\r\n                    :\r\n                        EditableColumn(editText)\r\n                    }\r\n\r\n                    { data.keyFollowId &&\r\n                        <div className={classes.followarea}>\r\n                        < div><div>{getDateMessage(data.keyFollowId.dateRegist) }</div><div> <TagChipList listStr={data.keyFollowId.strTaglist} /> </div> <div>{data.keyFollowId.strMainText}</div></div>\r\n                        </div>\r\n                    }\r\n                    {bdelete ?\r\n                        DeleteColumn()\r\n                    :\r\n                        <div className={classes.ulbutton} >\r\n                            <span><IconButton edge=\"start\" color=\"inherit\"  className={classes.menuButton} onClick={()=>dispatch({type:MAKE_NEW_REPLY_MODAL,reply_source:data})} ><ReplyTwoToneIcon size=\"small\"/></IconButton></span>\r\n                            <span><IconButton edge=\"start\" ize=\"small\" color=\"inherit\" onClick={()=>dispatch({type:MAKE_NEWFOLLOW_MODAL,follow_data:data})} ><AddCircleOutlineTwoToneIcon size=\"small\"/></IconButton></span>\r\n                            {data.keyReplyBase &&\r\n                                <span><Button edge=\"start\" ize=\"small\" color=\"inherit\" onClick={()=>history.push(\"/reply/\"+data.id)}   endIcon={<DoubleArrowOutlined />}> 応答を開く </Button></span>\r\n                            }\r\n\r\n                            {data.boolHasModified &&\r\n                                <span> 修正あり </span>\r\n                            }\r\n                            <span className={classes.toFooter}>\r\n                                <div className={classes.todatePublish}> { getDateMessage(data.datePublish) }</div>\r\n                                {  data.listReceiver & data.listReceiver!==\"\" ?\r\n                                    <div className={classes.toName} >宛先:{getNames(data.listReceiver)}</div>\r\n                                    :\r\n                                    <div/>\r\n                                }\r\n                            </span>\r\n                        </div>\r\n                    }\r\n                </Box>\r\n        </div>\r\n    )\r\n\r\n}\r\n\r\nexport default MemoColumn;","import React from 'react'\r\nimport {Button,Modal,Accordion,AccordionSummary,AccordionDetails,Collapse,CircularProgress}  from '@material-ui/core';\r\nimport { ExpandMoreIcon } from '@material-ui/icons/ExpandMore';\r\nimport { makeStyles } from '@material-ui/core';\r\n\r\nimport ButtonSample from './ButtonSample';\r\n\r\nconst styles=makeStyles((theme)=>({\r\n    loadingRoot:{\r\n        background:\"#888\",\r\n        opacity:0.3,\r\n        height:\"100vh\",\r\n        top:0\r\n         \r\n    },\r\n       \r\n    loadingCircle :{\r\n        zIndex:2000,\r\n        background:\"#888\",\r\n        //marginTop:\"0%\",\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        marginTop:\"30%\",\r\n        alignItems: \"center\",\r\n        //opacity:0.5\r\n    }\r\n}));\r\n\r\n\r\nconst TestLoading=(props)=>{\r\n    const classes=styles();\r\n\r\n\r\n    return (\r\n        <div className={classes.loadingRoot}>AAAA\r\n           \r\n             <div>後に書いてあるもの</div>\r\n             <div className={classes.loadingCircle} ><CircularProgress color=\"inherit\" /></div>\r\n\r\n        </div>\r\n    )\r\n\r\n}\r\n\r\nexport default TestLoading;","import React from 'react';\r\n\r\n// import TestHooks  from './TestHooks';\r\n// import TestMemoInsertButton  from './TestMemoInsertButton';\r\n// import TestMakeMemoModal  from './TestMemoMakeModal';\r\n// import TestMemoDeleteModal  from './TestMemoDeleteModal';\r\n import {TestMemoColumn} from '../test/TestMemoColumn';\r\n// import {TestMainHeader} from './TestMainHeader';\r\n//import TestPasswordModal from '../test/TestPasswordModal';\r\n//import TestLogoutModal from '../test/TestLogoutModal';\r\n//import TestSearchForm from '../test/TestSearchForm';\r\n// import TestMemoThread from '../test/TestMemoThread';\r\n// import TestFollowColumn from './TestFollowColumn';\r\n// import TestFollowList from './TestFollowList';\r\n// import {TestMemoList} from './TestMemoList';\r\n// import TestAuthAction  from './TestAuthAction';\r\n//import { TestTagSearchPanel } from '../test/TestTagSearcPanel';\r\n//import { TestTagSearchList } from '../test/TestTagSearcList';\r\n//import TestReplyColumnList from '../test/TestReplyColumnList';\r\n import {TestTagPutModal} from '../test/TestTagPutModal';\r\n//import {TestNoticeColumn} from '../test/TestNoticeColumn';\r\n//import {TestNoticeList} from '../test/TestNoticeList ';\r\nimport {TestFreeTagPutModal} from '../test/TestFreeTagPutModal';\r\nimport TestLoading from '../test/TestLoading';\r\n\r\nconst TestMain=(props)=>{\r\n\r\n    return (\r\n        <div>\r\n            <h1>Test Main</h1>\r\n            {/* <TestAuthAction/> \r\n             <TestMemoInsertButton/>\r\n            <TestMakeMemoModal/>\r\n             \r\n            <TestPasswordModal/>*/}\r\n            <TestLoading/>\r\n            {/*<TestMemoDeleteModal/>\r\n            <TestMemoList/>\r\n            <TestTagSearchPanel/>\r\n            <TestTagSearchList/>\r\n            <TestReplyColumnList/>\r\n            <TestTagPutModal/>\r\n            <TestNoticeColumn/>\r\n            <TestNoticeList />\r\n            \r\n            <TestFreeTagPutModal/>\r\n\r\n            <TestSearchForm/>\r\n            <TestMainHeader/> \r\n            <TestFollowColumn/>\r\n            <TestFollowList/>*/}\r\n        </div>\r\n    )\r\n\r\n\r\n}\r\n\r\nexport default TestMain;\r\n","import React from 'react';\r\nimport {throttle} from 'lodash';\r\n\r\nexport const ScrollUpdater=(props)=>{\r\n\r\n    //実行関数　setNewTimeLine\r\n\r\n    //監視パラメータ　timeline\r\n    \r\n\r\n    const checkInEnd=throttle(() => {\r\n        const m1=Math.round(window.innerHeight + document.documentElement.scrollTop);\r\n        const m2=Math.round(document.documentElement.scrollHeight);\r\n        //console.log(\"m1 \",m1,\"m2 \",m2);\r\n\r\n        if (\r\n            //ブラウザによってずれが起きるためトリガーに少しだけ範囲を作る\r\n            Math.abs(m1-m2)>5\r\n        ) {\r\n            return;\r\n        }\r\n        if (!props.endflg)  props.scrollFunc();\r\n    \r\n        }, 200\r\n    );\r\n    \r\n    \r\n    React.useEffect(()=>{\r\n        //画面を切り替えたらとりあえずトップに戻す\r\n        document.documentElement.scrollTop=0;\r\n        props.scrollFunc();\r\n    },[]);\r\n    \r\n    React.useEffect(() => {\r\n        \r\n        window.removeEventListener('scroll', checkInEnd);\r\n        window.addEventListener('scroll', checkInEnd);\r\n        \r\n    \r\n        return () => {\r\n        window.removeEventListener('scroll', checkInEnd);\r\n        \r\n        };\r\n        //propsの中身は随時更新しないと同じ初期値を使いまわすことになる\r\n    }, [props.checkParam]); // eslint-disable-line react-hooks/exhaustive-deps\r\n    \r\n    return (\r\n        <div/>\r\n    )\r\n\r\n}\r\n\r\n","import React ,{useState,useEffect}  from 'react';\r\nimport {useDispatch,useSelector}  from 'react-redux';\r\nimport {makeStyles} from '@material-ui/styles';\r\nimport MemoColumn from './MemoColumn';\r\n//import {LOAD_NEW_MEMO} from '../lib/ActionTypeString';\r\nimport {loadNewMemo} from '../actions';\r\nimport {ScrollUpdater} from '../lib/windowScrollControll';\r\nimport { Grid } from '@material-ui/core';\r\nimport APICallController from '../lib/ConnectionLibrary'; \r\nimport LinearProgress from '@material-ui/core/LinearProgress';\r\nimport { getTimeStampNow } from '../lib/UtilityLibrary';\r\n//このリスト画面自体は通信にはかかわらず、親のコンポーネントからデータを渡す\r\n//このコンポーネント自体はスクロール位置に関係する\r\n\r\n\r\n\r\nconst listStyles=makeStyles((theme)=>({\r\n    base: {\r\n        position:'relative',\r\n        top:'60px'\r\n    },\r\n\r\n    progress:{\r\n        width: '80%',\r\n        margin: '2px',\r\n    }\r\n\r\n}));\r\nconst MemoList=(props)=>{\r\n    //const dispatch=useDispatch();\r\n    const user_list=useSelector(state=>state.auth_login.user_list,[]);\r\n    const timeline=useSelector(state=>state.memo_main.timeline,[]);\r\n    const read=useSelector(state=>state.memo_main.read,[]);\r\n    const fav=useSelector(state=>state.memo_main.fav,[]);\r\n    \r\n    const endflg=useSelector(state=>state.memo_main.endflg);\r\n    const dispatch = useDispatch();\r\n    \r\n    const changFlg=useSelector(state=>state.memo_main.change);\r\n    useEffect(() => {\r\n        if(timeline.length>0){\r\n            dispatch(loadNewMemo(\"-1\"));\r\n        }\r\n    }, [changFlg]);\r\n\r\n\r\n    \r\n    const setNewTimeLine=()=>{\r\n        let fromDay=\"-1\";\r\n        if (timeline.length>0) {\r\n            fromDay=new Date(timeline.slice(-1)[0].dateRegist).toJSON();\r\n        } \r\n\r\n        if(endflg) return;\r\n\r\n        console.log(\" Add Start\",fromDay);\r\n        dispatch(loadNewMemo(fromDay));\r\n        //loadNewMemo(startnum);\r\n    };\r\n\r\n    const classes=listStyles();\r\n\r\n    return (\r\n        <div className={classes.base}>\r\n            {user_list.length>0 && \r\n            <ScrollUpdater scrollFunc={()=>setNewTimeLine() }  checkParam={timeline} endflg={endflg} buffer={60} />\r\n            }\r\n            \r\n            <Grid spacing={2}>\r\n            {\r\n                timeline.map((d)=>{\r\n                    return (<MemoColumn\r\n                        key={d.id}\r\n                        data={d}\r\n                        read={read}\r\n                        fav={fav}\r\n                    />)\r\n                })\r\n            }\r\n            \r\n            </Grid>\r\n\r\n            \r\n            {endflg ?  <div>現在の表示内容は以上です。</div> : <div className={classes.progress}><LinearProgress/></div> }\r\n           \r\n\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nexport default MemoList;\r\n","import React from 'react';\r\nimport {useSelector} from 'react-redux';\r\nimport {CircularProgress}  from '@material-ui/core';\r\nimport { Modal } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core';\r\n\r\n\r\nconst styles=makeStyles((theme)=>({\r\n    loadingRoot:{\r\n        display:\"absolute\",\r\n        zIndex:200000,\r\n        //background:\"#888\",\r\n        //opacity:0.1,\r\n        padding:\"10px\",\r\n        height:\"100vh\",\r\n        //top:0\r\n         \r\n    },\r\n       \r\n    loadingCircle :{\r\n        //background:\"#888\",\r\n        //marginTop:\"0%\",\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        marginTop:\"30%\",\r\n        alignItems: \"center\",\r\n        opacity:0.5\r\n    }\r\n}));\r\n\r\nexport const CirculerSelf=()=>{\r\n    const classes=styles();\r\n    return(\r\n        <div className={classes.loadingRoot}>\r\n            <div className={classes.loadingCircle} >\r\n                <CircularProgress \r\n                    color=\"success\"  \r\n                    size={60}   \r\n                />\r\n            </div>\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\n\r\nconst CirculerLoading=(props)=>{\r\n    \r\n\r\n    const isLoad = useSelector(state => state.auth_login.isLoad,false);\r\n\r\n    return (\r\n            <div>\r\n                {props.isModal ?\r\n\r\n                    <Modal open={isLoad} closeAfterTransition onClose={()=>{}} >    \r\n                        <CirculerSelf/>\r\n                    </Modal>\r\n                : isLoad ?\r\n                    <CirculerSelf />\r\n                :<div/>\r\n                }\r\n            </div>\r\n    )\r\n\r\n}\r\n\r\nexport default CirculerLoading;","import React,{useEffect} from 'react';\r\nimport MemoList from \"../components/MemoList\";\r\nimport CirculerLoading from '../components/CirculerLoading';\r\n\r\nimport {useSelector,useDispatch}  from 'react-redux';\r\nimport { loadNewMemo } from '../actions';\r\nimport APICallController from '../lib/ConnectionLibrary';\r\n\r\n\r\n//メインページの画面メイン\r\nconst MainListPage=(props)=>{\r\n    \r\n    //これはここで行う\r\n    APICallController.setView(\"main\");\r\n\r\n    const tag_list=useSelector(state=>state.auth_login.all_tag);\r\n    //メモの更新が行われた後、再度一覧を取得する\r\n\r\n    return (\r\n            <div className=\"page\">\r\n                {tag_list &&\r\n                    <MemoList/>\r\n                }            \r\n                <CirculerLoading isModal={false} />\r\n            </div>\r\n    )\r\n\r\n}\r\n\r\nexport default  MainListPage;\r\n","import React ,{useState,useEffect}  from 'react';\r\nimport {useDispatch,useSelector}  from 'react-redux';\r\nimport MemoColumn from './MemoColumn';\r\nimport { makeStyles} from '@material-ui/styles';\r\nimport LinearProgress from '@material-ui/core/LinearProgress';\r\nimport {ScrollUpdater} from '../lib/windowScrollControll';\r\nimport { getTaggedData } from '../actions';\r\nimport TagInputList from './TagInputList';\r\nimport { getTimeStampNow } from '../lib/UtilityLibrary';\r\n\r\n//このリスト画面自体は通信にはかかわらず、親のコンポーネントからデータを渡す\r\n//このコンポーネント自体はスクロール位置に関係する\r\n\r\n\r\n\r\nconst listStyles=makeStyles((theme)=>({\r\n    base: {\r\n        position:'relative',\r\n        top:'60px'\r\n    }\r\n\r\n}))\r\n\r\n\r\nconst TagSearchList=(props)=>{\r\n    //const dispatch=useDispatch();\r\n    \r\n    const tag_list=useSelector(state=>state.auth_login.all_tag,[]);    \r\n    const timeline=useSelector(state=>state.tagged_main.timeline);\r\n    const read=useSelector(state=>state.tagged_main.read,[]);\r\n    const fav=useSelector(state=>state.tagged_main.fav,[]);\r\n\r\n    const endflg=useSelector(state=>state.memo_main.endflg,true);\r\n    //更新後の内容を反映するためのフラグ\r\n    const changeFlg=useSelector(state=>state.memo_main.change);\r\n\r\n\r\n    const [selected,setSelected]=useState([]);\r\n    const classes=listStyles();\r\n    const [start,setStart]=useState(false);\r\n    const [showEnd,setShowEnd]=useState(false);\r\n    const [showProgress,setShowProgress]=useState(false);\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const setNewTagList=()=>{\r\n        console.log(\"setNewTagList  --\");\r\n        if(!timeline || selected.length==0 ) return;\r\n        const fromDay=new Date(timeline.slice(-1)[0].dateRegist).toJSON();\r\n        \r\n        sendSelectedTag(selected,fromDay,true);\r\n    };\r\n\r\n    useEffect(()=>{\r\n        if (tag_list.length>0){\r\n            setStart(true);\r\n        }\r\n        setShowEnd(timeline.length!==0 & endflg);\r\n        setShowProgress(timeline.length!==0 & !endflg);\r\n\r\n    },[tag_list,endflg,timeline]);\r\n\r\n\r\n    const sendSelectedTag=(arr,day=\"\", next=false)=>{\r\n        const arr_res=arr.map((d)=>d.id);\r\n        console.log(arr, arr_res);\r\n        if (day==\"\") day=\"-1\";\r\n\r\n        dispatch(getTaggedData(arr_res,day,next));\r\n    };\r\n\r\n    useEffect(()=>{\r\n        sendSelectedTag(selected);\r\n    },[changeFlg]);\r\n\r\n    const onSelect=(arr)=>{\r\n        setSelected(arr);\r\n        sendSelectedTag(arr);  \r\n    };\r\n    \r\n    return (\r\n        <div>\r\n        {start &&\r\n        <ScrollUpdater scrollFunc={()=>setNewTagList()} checkParam={timeline} endflg={endflg} buffer={60}/>\r\n        }\r\n        <div className={classes.base}>\r\n        <TagInputList setSelected={onSelect} end={false} />\r\n            {\r\n                timeline.length===0 ?\r\n\r\n                <div> 該当する検索結果は存在しません。<br/>タグを新規選択するか、現在選択のタグを外してください。 </div>                \r\n                :  \r\n                timeline.map((d)=>{\r\n\r\n                        return (<MemoColumn\r\n                            key={d.id}\r\n                            data={d}\r\n                            read={read}\r\n                            fav={fav}\r\n\r\n                        />)\r\n\r\n                    })\r\n\r\n            }\r\n            {  showEnd ?  <div>現在の表示内容は以上です。</div> :<div/>}\r\n            {  showProgress ? <div className={classes.progress}><LinearProgress/></div> :<div/> }\r\n                \r\n        </div>\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nexport default TagSearchList;\r\n","import React, {useEffect} from 'react';\r\nimport {useSelector}  from 'react-redux';\r\nimport CirculerLoading from '../components/CirculerLoading';\r\n\r\nimport TagSearchList from \"../components/TagSearchList\";\r\nimport APICallController from '../lib/ConnectionLibrary';\r\n\r\n//テスト表示用\r\n\r\n\r\n//メインページの画面メイン\r\nconst TaggedSearchPage=(props)=>{\r\n\r\n    //const tag_list=useSelector(state=>state.auth_login.all_tag,[]);\r\n    \r\n    useEffect(() => {        \r\n        APICallController.setView(\"tag\");\r\n        \r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"page\" >\r\n            <TagSearchList />\r\n            <CirculerLoading isModal={false} />\r\n        </div>\r\n    )\r\n\r\n}\r\n\r\nexport default  TaggedSearchPage;","//各メモの表示を行う\r\n\r\n\r\n//初期状態メモヘッダーのみ表示\r\n\r\n//ヘッダーから開閉イベントを受けたら詳細をアニメーションで展開する\r\n\r\nimport React ,{useEffect, useState} from 'react';\r\nimport  {useSelector} from 'react-redux'\r\nimport {Collapse,IconButton,Box}  from '@material-ui/core';\r\n\r\nimport ExpandMoreIcon  from '@material-ui/icons/ExpandMore';\r\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess';\r\nimport CheckBoxOutlineBlankTwoToneIcon from '@material-ui/icons/CheckBoxOutlineBlankTwoTone';\r\nimport CheckBoxTwoToneIcon from '@material-ui/icons/CheckBoxTwoTone';\r\n\r\n\r\nimport ReplyTwoToneIcon from '@material-ui/icons/ReplyTwoTone';\r\nimport AddCircleOutlineTwoToneIcon from '@material-ui/icons/AddCircleOutlineTwoTone';\r\nimport DeleteOutlinedIcon from '@material-ui/icons/DeleteOutlined';\r\n\r\nimport  {getDateMessage,getUserName} from  '../lib/UtilityLibrary';\r\n\r\n//重要\r\nimport StarBorderTwoToneIcon from '@material-ui/icons/StarBorderTwoTone';\r\nimport StarTwoToneIcon from '@material-ui/icons/StarTwoTone';\r\n\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    memo:{            \r\n        width: '90%',\r\n        backgroundColor: theme.palette.background.paper,\r\n        padding: theme.spacing(1, 2, 0),\r\n        borderTop: '2px solid #ccc',\r\n      },\r\n\r\n      \r\n    memoSub:{            \r\n        width: '80%',\r\n        right:'20px',\r\n        backgroundColor: theme.palette.background.default,\r\n        padding: theme.spacing(1, 2, 0),\r\n        borderTop: '2px solid #ccc',\r\n      },\r\n\r\n      \r\n    memoChild:{            \r\n        width: '85%',\r\n        right:'20px',\r\n        backgroundColor: theme.palette.background.default,\r\n        padding: theme.spacing(1, 2, 0),\r\n        borderTop: '2px solid #ccc',\r\n      },\r\n\r\n    memoParent:{            \r\n        width: '85%',\r\n        //right:'20px',\r\n        backgroundColor: theme.palette.background.default,\r\n        padding: theme.spacing(1, 2, 0),\r\n        border: '1px solid #555555',\r\n      },\r\n\r\n      ulbutton:{\r\n        display:\"flex\",\r\n        listStyle:\"none\",\r\n        align:\"flex-end\",  \r\n    },\r\n    menuButton:{\r\n        spacing:'10px',\r\n    },\r\n\r\n\r\n\r\n    icons:{\r\n        justifyContent: \"flex-end\",\r\n        \r\n    },\r\n\r\n    headertext:{\r\n        justifyContent: \"flex-start\",\r\n        \r\n    },\r\n\r\n    libutton:{\r\n        margin:10\r\n    },\r\n\r\n    textarea:{\r\n       // width:\"100%\",\r\n       // height:100\r\n    }\r\n\r\n  }));\r\n\r\n\r\n\r\nconst ReplyColumn=({data,boxstyle,mark})=>{\r\n    const TEXT_LIMIT=40;\r\n    const dd=data;\r\n    //console.log(mark);\r\n    console.log(\"rpc\",dd);\r\n    console.log(\"rpc str\",dd.strMainText);\r\n    \r\n    \r\n    const setHeaderText=(txt)=>{\r\n        //if (typeof txt ===\"undefined\") console.log(\"txt undefined \");\r\n        return txt.substring(0,TEXT_LIMIT)+\"....\";\r\n    };\r\n    const classes=useStyles();\r\n    //const [maintext,setMainText] =useState(setHeaderText(dd.strMainText));\r\n    const [maintext,setMainText] =useState(dd.strMainText);\r\n\r\n    const user_list = useSelector(state => state.auth_login.user_list,[]);\r\n    const tag_list = useSelector(state => state.auth_login.all_tag,[]);\r\n    const hasRead=useSelector(state=>state.memo_main.read);\r\n    const favorite=useSelector(state=>state.memo_main.fav);\r\n\r\n    const [expanded ,setExpanded]=useState(false);\r\n    const [hasStar, setHasStar] = useState(favorite.includes(data.id));\r\n    const [read, setRead] = useState(hasRead.includes(data.id));\r\n    const [bstyle,setBoxStyle]=useState(classes.memo);\r\n\r\n    const checkText=(exp)=>{\r\n        if(exp){\r\n            setMainText(dd.strMainText);\r\n        }else{\r\n            setMainText(setHeaderText(dd.strMainText) );\r\n        }\r\n    }\r\n\r\n    const onExpanded=()=>{\r\n        // if(!expanded){\r\n        //     setMainText(dd.strMainText);\r\n        // }else{\r\n        //     setMainText(setHeaderText(dd.strMainText) );\r\n        // }\r\n        checkText(!expanded);\r\n\r\n        setExpanded(!expanded);\r\n\r\n    };\r\n\r\n    const onStarClick=()=>{\r\n        setHasStar(!hasStar);\r\n        //後はidとstar情報をサーバーに送るアクション\r\n\r\n    };\r\n\r\n    const onReadClick=()=>{\r\n        setRead(!read);\r\n        //後はidとread情報をサーバーに送るアクション\r\n\r\n    };\r\n\r\n    const getNames=(arr)=>{\r\n        const ars=String(arr).split(\",\");\r\n        const names=ars.map((d)=>{\r\n           const tg=user_list.find((el)=>el.id===parseInt(d))\r\n           return tg.strName;\r\n        })\r\n        \r\n        return names.reduce((acc,value)=>acc+\",\"+value)\r\n    }\r\n\r\n\r\n    useEffect(()=>{\r\n        //setMainText(dd.strMainText);\r\n       // setMainText(setHeaderText(dd.strMainText) );\r\n       checkText(expanded);\r\n        switch(boxstyle){\r\n            case \"thread\":\r\n                 setBoxStyle(classes.memoSub);\r\n                break;\r\n            case \"parent\":\r\n\r\n                setBoxStyle(classes.memoParent);\r\n                break;\r\n            \r\n            case \"child\" :\r\n                setBoxStyle(classes.memoChild);\r\n                break;\r\n            default:\r\n                setBoxStyle(classes.memo);\r\n                break;\r\n\r\n        }\r\n\r\n    });\r\n\r\n\r\n\r\n    return (\r\n        <div>\r\n\r\n                <Box  className={bstyle}>\r\n                    <div className={classes.ulbutton} >\r\n                        <span className={classes.headertext}>\r\n                        <div> { getDateMessage(data.datePublish) }</div> <div>{getNames(data.keySender)}より </div> \r\n                        </span>\r\n                        <span className={classes.icons}>\r\n                            <IconButton onClick={onStarClick}>\r\n                                {hasStar ? (<CheckBoxTwoToneIcon/>  ):( <CheckBoxOutlineBlankTwoToneIcon/>)}\r\n                            </IconButton>\r\n                            \r\n                        </ span>\r\n                      \r\n                        <span className={classes.icons} >\r\n                            <IconButton onClick={onReadClick} >\r\n                                {read ? ( <StarTwoToneIcon/> ):( <StarBorderTwoToneIcon/> )}\r\n                            </IconButton>\r\n                        \r\n                        </span>\r\n\r\n                        <div className={classes.icons} >\r\n                                <IconButton onClick={onExpanded} >\r\n                                    {expanded ? ( <ExpandLessIcon/> ):( <ExpandMoreIcon/> )}\r\n                                </IconButton>    \r\n                            </div>\r\n                          \r\n    \r\n                    </div>\r\n                          \r\n                    <Collapse in={expanded} collapsedHeight={30}> \r\n                        <div onClick={onExpanded} className={classes.ulbutton}>\r\n                            <div className={classes.textarea}>{maintext}</div>\r\n                            \r\n                        </div>\r\n                        <div className={classes.ulbutton} >\r\n                            <div>\r\n                                <IconButton edge=\"start\" color=\"inherit\"  className={classes.menuButton} ><ReplyTwoToneIcon size=\"small\"/></IconButton>\r\n                                <IconButton edge=\"start\" ize=\"small\" color=\"inherit\"  ><AddCircleOutlineTwoToneIcon size=\"small\"/></IconButton>\r\n                                <IconButton edge=\"start\" size=\"small\" color=\"inherit\"  ><DeleteOutlinedIcon size=\"small\"/></IconButton>\r\n                            </div>\r\n                        </div>\r\n                    </Collapse>\r\n                    \r\n     \r\n                </Box>\r\n        </div>\r\n    )\r\n\r\n}\r\n\r\nexport default ReplyColumn;","import React, { useState, useLayoutEffect, useRef,useEffect } from 'react';\r\nimport {makeStyles} from '@material-ui/core/styles';\r\nimport ReplyColumn from './ReplyColumns';\r\n\r\n/**\r\n * Styled component\r\n */\r\n\r\n\r\nconst useStyles=makeStyles({\r\n\r\n    wrapper:props=>({\r\n        width: \"100%\",\r\n        margin: \"2em auto\",\r\n        position: \"relative\",\r\n        padding: \"0em 1em\",\r\n\r\n        '&:after': {\r\n            content: '',\r\n            display: \"table\",\r\n            clear: \"both\"\r\n        },\r\n    \r\n        '&:before': {\r\n            content: '\"\"',\r\n            position: \"absolute\",\r\n            top: 0,\r\n            left: \"10px\",\r\n            height:(props.lineHeight)+\"px\",\r\n            width: \"2px\",\r\n            background: \"black\"\r\n        }\r\n        \r\n    })\r\n});\r\n\r\n\r\nconst  ReplyColumnList=(props)=> {\r\n\tconst [lineHeight, setLineHeight] = useState(0);\r\n    const classes=useStyles({lineHeight});\r\n\tconst wrapperHeight = useRef(null);\r\n    //console.log(\" ReplyColumnList \",props);\r\n    \r\n\tuseLayoutEffect(() => {\r\n\t\tconst handleResize = () => {\r\n\t\t\tsetLineHeight(\r\n\t\t\t\twrapperHeight.current.clientHeight\r\n                // -wrapperHeight.current.lastChild.clientHeight\r\n\t\t\t);\r\n\t\t};\r\n\r\n\t\twindow.addEventListener('resize', handleResize)\r\n\t\thandleResize();\r\n\r\n\t\treturn () => {\r\n\t\t\twindow.removeEventListener('resize', handleResize);\r\n\t\t}\r\n\t}, [props.data, lineHeight]);\r\n\r\n\r\n\treturn (\r\n\t\t<div\r\n            className={classes.wrapper}\r\n\t\t\tref={wrapperHeight}\r\n\t\t\tlineHeight={lineHeight}\r\n\t\t>\r\n            {\r\n                props.data.map((d)=>{\r\n                    return ( <ReplyColumn\r\n                        boxstyle={\"thread\"}\r\n                        key={d.id}\r\n                        data={d}\r\n                        mark={props.mark}\r\n\r\n                    />)\r\n                    \r\n                })\r\n            }\r\n\r\n\r\n\t        \r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default ReplyColumnList\r\n","import React, {useEffect} from 'react';\r\nimport {useSelector,useDispatch}  from 'react-redux';\r\nimport { LinearProgress, makeStyles } from '@material-ui/core';\r\nimport  {getReplyData} from '../actions';\r\nimport ReplyColumnList  from '../components/ReplyColumnList'\r\nimport ReplyColumn from '../components/ReplyColumns';\r\n\r\n//テスト表示用\r\n\r\n\r\nconst listStyles=makeStyles((theme)=>({\r\n    base: {\r\n        position:'relative',\r\n        top:'60px'\r\n    },\r\n\r\n    progress:{\r\n        width: '80%',\r\n        margin: '2px',\r\n    }\r\n\r\n}));\r\n\r\n//メインページの画面メイン\r\nconst ReplyThreadPage=(props)=>{\r\n    const reply_main=useSelector(state=>state.reply_main);\r\n    console.log(\"reply_main\",reply_main);\r\n    const dispatch=useDispatch();\r\n\r\n    const classes=listStyles();\r\n    \r\n    useEffect(() => {\r\n        dispatch(getReplyData(props.match.params.id));\r\n        \r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        console.log(\"reply_main\",reply_main);\r\n        \r\n    }, [reply_main]);\r\n\r\n    const normalSceane=()=>{\r\n        return (\r\n            <div className={classes.base} >\r\n                \r\n                {reply_main.past_thread.length!==0 ?\r\n                　　<div><div> 過去の履歴 <div/> <ReplyColumnList   data={ reply_main.past_thread } boxstyle={\"thread\"} mark={\"a\"} /></div></div> \r\n                    :\r\n                     <div/> \r\n                }\r\n    \r\n                {Object.keys(reply_main.parent_data).length!==0 ? \r\n                     <div><div> 直近の応答</div><ReplyColumn  data={ reply_main.parent_data } mark={\"b\"}/></div> \r\n                :\r\n                     <div/> \r\n                }\r\n                <div>\r\n                    <ReplyColumn data={reply_main.self_data }  mark={\"e\"} />\r\n                </div>\r\n                {reply_main.child_data.length!==0 ?　　<div><div> 関連する応答 <div/> <ReplyColumnList   data={ reply_main.child_data } boxstyle={\"thread\"} mark={\"c\"}/></div></div> : <div/> }\r\n                {reply_main.future_thread.length!==0 ?　　<div><div> その後の履歴 <div/> <ReplyColumnList   data={ reply_main.future_thread } boxstyle={\"thread\"}  mark={\"d\"} /></div></div> : <div/> }\r\n            \r\n            </div>\r\n    \r\n        )\r\n    }\r\n\r\n    return (\r\n        reply_main.load_flg ? normalSceane() :<LinearProgress/> \r\n\r\n    )\r\n\r\n\r\n\r\n\r\n}\r\n\r\nexport default  ReplyThreadPage;","//各メモの表示を行う\r\n\r\n\r\n//初期状態メモヘッダーのみ表示\r\n\r\n//ヘッダーから開閉イベントを受けたら詳細をアニメーションで展開する\r\n\r\nimport React ,{useState,useEffect} from 'react';\r\n\r\nimport {useSelector} from 'react-redux';\r\nimport {Box}  from '@material-ui/core';\r\n\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport {getUserName,getDateMessage}  from  '../lib/UtilityLibrary';\r\nconst useStyles = makeStyles((theme) => ({\r\n\r\n    memo:{            \r\n        width: '90%',\r\n        backgroundColor: theme.palette.background.paper,\r\n        padding: theme.spacing(1, 2, 0),\r\n        border: '1px solid #000',\r\n      },\r\n\r\n    mainExp:{\r\n        fontSize:\"12pt\",\r\n        color:\"#555555\"\r\n    },\r\n    \r\n    subExp:{\r\n        fontSize:\"10pt\",\r\n        color:\"#aaa\"\r\n    },\r\n\r\n     \r\n  }));\r\n\r\n\r\n/*\r\n  ・届いた時間\r\n  ・送り元\r\n  ・メッセージ\r\n\r\n*/\r\n\r\n\r\nconst NoticeColumn=({data})=>{\r\n    //console.log(props);\r\n    const TEXT_LIMIT=40;\r\n\r\n    \r\n    const setHeaderText=(txt)=>{\r\n        return txt.substring(0,TEXT_LIMIT)+\"....\";\r\n    };\r\n    \r\n    const userlist = useSelector(state => state.auth_login.user_list);\r\n    const classes=useStyles();\r\n    const [maintext,setMainText] =useState(setHeaderText(data.keyMemoMain.strMainText));\r\n \r\n    const [senderMsg,setSenderMsg]= useState(\"\");\r\n\r\n\r\n    useEffect(()=>{\r\n        console.log(\"userlist \",  userlist);\r\n        if (!userlist || userlist.length===0) return;\r\n\r\n        const sender=getUserName(userlist,data.keyMemoMain.keySender);\r\n\r\n        if (data.numNoticeType===1){\r\n            setSenderMsg(sender+\"からメモが来ています。\");\r\n        } else{\r\n            setSenderMsg(sender+\"から返信が来ています。\");\r\n        }\r\n    },[userlist]);\r\n\r\n\r\n    return (\r\n        <div>\r\n\r\n                <Box className={classes.memo}>\r\n                    <Link underline=\"none\" to={\"/reply/\" +  data.keyMemoMain.id} replace >\r\n                        <div className={classes.mainExp}>\r\n                        {getDateMessage(data.keyMemoMain.dateRegist) } : {senderMsg}  \r\n                        </div>\r\n                        <div className={classes.subExp}>{maintext} </div>\r\n                    </Link>\r\n                </Box>\r\n        </div>\r\n    )\r\n\r\n}\r\n\r\nexport default NoticeColumn;","import React ,{useState,useEffect}  from 'react';\r\nimport {useDispatch,useSelector}  from 'react-redux';\r\nimport {makeStyles} from '@material-ui/styles';\r\nimport NoticeColumn from './NoticeColumn';\r\n//import {LOAD_NEW_MEMO} from '../lib/ActionTypeString';\r\nimport {getNoticeData} from '../actions';\r\nimport {ScrollUpdater} from '../lib/windowScrollControll';\r\nimport LinearProgress from '@material-ui/core/LinearProgress';\r\n//このリスト画面自体は通信にはかかわらず、親のコンポーネントからデータを渡す\r\n//このコンポーネント自体はスクロール位置に関係する\r\n\r\n\r\n\r\nconst listStyles=makeStyles((theme)=>({\r\n    base: {\r\n        position:'relative',\r\n        top:'60px'\r\n    },\r\n\r\n    progress:{\r\n        width: '80%',\r\n        margin: '2px',\r\n    }\r\n\r\n}));\r\nconst NoticeList=(props)=>{\r\n    //const dispatch=useDispatch();\r\n    \r\n    const notices=useSelector(state=>state.notice_main.notices);\r\n    const endflg=useSelector(state=>state.notice_main.endflg);\r\n    const [startnum,setStartNum]=useState(0);\r\n    const dispatch = useDispatch();\r\n\r\n    useEffect(()=>{\r\n        console.log(\" Add Start\");\r\n         dispatch(getNoticeData(startnum));\r\n    },[]);\r\n\r\n\r\n\r\n    const classes=listStyles();\r\n\r\n    return (\r\n        <div className={classes.base}>\r\n            {notices.length>0 ?\r\n\r\n                notices.map((d)=>{\r\n                    return (<NoticeColumn\r\n                        data={d}\r\n                    />)\r\n                })\r\n\r\n            :\r\n            <div>ロード中</div>\r\n            }\r\n            {endflg ?  <div>現在の表示内容は以上です。</div> : <div className={classes.progress}><LinearProgress/></div> }\r\n           \r\n\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nexport default NoticeList;\r\n","import React from 'react';\r\nimport {useSelector,useDispatch}  from 'react-redux';\r\nimport MainHeader from \"../components/MainHeader\";\r\nimport {  makeStyles } from '@material-ui/core';\r\nimport NoticeList from '../components/NoticeList';\r\n\r\n//テスト表示用\r\n\r\n\r\nconst listStyles=makeStyles((theme)=>({\r\n    base: {\r\n        position:'relative',\r\n        top:'60px'\r\n    },\r\n\r\n    progress:{\r\n        width: '80%',\r\n        margin: '2px',\r\n    }\r\n\r\n}));\r\n\r\n//メインページの画面メイン\r\nconst NoticeListPage=(props)=>{\r\n    const classes=listStyles();\r\n\r\n    return (\r\n        \r\n        <div >\r\n            <NoticeList />\r\n        </div> \r\n\r\n    )\r\n}\r\n\r\nexport default  NoticeListPage;","import React ,{useState,useEffect}  from 'react';\r\nimport {useDispatch,useSelector}  from 'react-redux';\r\nimport {makeStyles} from '@material-ui/styles';\r\nimport MemoColumn from './MemoColumn';\r\n//import {LOAD_NEW_MEMO} from '../lib/ActionTypeString';\r\nimport {showFavorite} from '../actions';\r\nimport {ScrollUpdater} from '../lib/windowScrollControll';\r\nimport LinearProgress from '@material-ui/core/LinearProgress';\r\nimport { Typography } from '@material-ui/core';\r\n//このリスト画面自体は通信にはかかわらず、親のコンポーネントからデータを渡す\r\n//このコンポーネント自体はスクロール位置に関係する\r\n\r\n\r\n\r\nconst listStyles=makeStyles((theme)=>({\r\n    base: {\r\n        position:'relative',\r\n        top:'60px'\r\n    },\r\n\r\n    progress:{\r\n        width: '80%',\r\n        margin: '2px',\r\n    }\r\n\r\n}));\r\nconst FavoriteList=(props)=>{\r\n    //const dispatch=useDispatch();\r\n    \r\n    \r\n    const timeline=useSelector(state=>state.show_favorite.timeline,[]);\r\n    const read=useSelector(state=>state.show_favorite.read,[]);\r\n    const fav=useSelector(state=>state.show_favorite.fav,[]);\r\n    const endflg=useSelector(state=>state.show_favorite.endflg);\r\n    const [startnum,setStartNum]=useState(0);\r\n    const dispatch = useDispatch();\r\n\r\n    \r\n    const setNewTimeLine=()=>{\r\n        dispatch(showFavorite());\r\n        //loadNewMemo(startnum);\r\n    };\r\n\r\n\r\n    const classes=listStyles();\r\n\r\n    return (\r\n        <div className={classes.base}>\r\n            <div><Typography variant='h5' gutterBottom >お気に入り一覧</Typography></div>\r\n            <hr/>\r\n            <ScrollUpdater scrollFunc={()=>setNewTimeLine() }  checkParam={timeline} endflg={endflg} buffer={60} />\r\n            {timeline && \r\n                timeline.map((d)=>{\r\n                    return (<MemoColumn\r\n                        key={d.id}\r\n                        data={d}\r\n                        \r\n                        read={read}\r\n                        fav={fav}\r\n                    />)\r\n                })\r\n            }\r\n            {endflg ?  <div><Typography variant='h6' gutterBottom >現在の表示内容は以上です。</Typography></div> : <div className={classes.progress}><LinearProgress/></div> }\r\n           \r\n\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nexport default FavoriteList;\r\n","import React, {useState,useEffect} from 'react';\r\nimport {connect,useSelector,useDispatch}  from 'react-redux';\r\nimport { LinearProgress, makeStyles } from '@material-ui/core';\r\nimport FavoriteList from '../components/FavoriteList';\r\n\r\n//テスト表示用\r\n\r\n\r\nconst listStyles=makeStyles((theme)=>({\r\n    base: {\r\n        position:'relative',\r\n        top:'60px'\r\n    },\r\n\r\n    progress:{\r\n        width: '80%',\r\n        margin: '2px',\r\n    }\r\n\r\n}));\r\n\r\n//メインページの画面メイン\r\nconst FavoriteListPage=(props)=>{\r\n    const classes=listStyles();\r\n    \r\n    return (    \r\n        <div >\r\n            <FavoriteList/>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default  FavoriteListPage;","import react,{useState,useEffect,useRef} from 'react';\r\nimport { useDispatch,useSelector } from 'react-redux';\r\nimport {\r\n    Button,\r\n    FormControl,\r\n    NativeSelect,\r\n    FormHelperText,\r\n    FormControlLabel,\r\n    Checkbox,\r\n    Tab,\r\n    Tabs,\r\n    TextField\r\n    } from '@material-ui/core';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nimport { TYPE_TAG_GUEST,TYPE_TAG_MENBER} from '../lib/TagTypeNames';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport {GetTagName} from './parts/ShowInfoSet';\r\nimport {loadUserConfig,changeUserConfig,resetUserConfig} from '../actions';\r\n\r\n\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    \r\n    root: {\r\n        //display: 'flex',\r\n       // justifyContent: 'center',\r\n        flexWrap: 'wrap',\r\n        top:'200px',\r\n        '& > *': {\r\n          margin: theme.spacing(0.5),\r\n        },\r\n        padding:\"0px 0px 0px\"\r\n      },\r\n    formControl: {\r\n      margin: theme.spacing(1),\r\n      minWidth: 120,\r\n    },\r\n    selectEmpty: {\r\n      marginTop: theme.spacing(2),\r\n    },\r\n  }));\r\n  \r\n\r\n\r\nexport const UserTagConfigColumn=(props)=>{\r\n    //console.log(props);\r\n    //console.log(\" UserTagConfigColumn start \");\r\n    \r\n    const tag_list=useSelector(state=>state.auth_login.tag_list);\r\n    const [status,setStatus]=useState(props.data.numTagStatus);\r\n    const [isShow,setIsShow]=useState(props.data.boolIsShownInList);\r\n\r\n\r\n    const classes=useStyles();\r\n    const dispatch=useDispatch();\r\n\r\n    const onChangeTabSearch=(e,id)=>{\r\n        //変更はSnackBarのみで知らせる\r\n        const stnow=e.target.value;\r\n\r\n        setStatus(stnow);\r\n        dispatch(changeUserConfig(id,stnow,isShow));\r\n\r\n\r\n    };\r\n\r\n    const onChangeListView=(id)=>{\r\n        setIsShow(!isShow);        \r\n        dispatch(changeUserConfig(id,status,!isShow));\r\n\r\n\r\n    };\r\n\r\n    return (\r\n        <div  >\r\n        <span> <GetTagName id={props.data.keyTag}/> </span>\r\n        <span>\r\n            <FormControl className={classes.formControl}>\r\n                <NativeSelect\r\n                value={status}\r\n                onChange={(e)=>onChangeTabSearch(e,props.data.keyTag)}\r\n                name=\"status\"\r\n                className={classes.selectEmpty}\r\n                inputProps={{ 'aria-label': 'age' }}\r\n                >\r\n                    <option　defaultChecked value=\"1\">メインリスト</option>\r\n                    <option value=\"2\">サブリスト</option>\r\n                    <option value=\"-1\">検索のみ</option>\r\n                </NativeSelect>\r\n            </FormControl>\r\n\r\n        </span>\r\n        <span>\r\n          <FormControlLabel\r\n                control={\r\n                <Checkbox\r\n                    checked={isShow}\r\n                    onChange={(e)=>onChangeListView(props.data.keyTag)}\r\n                    //name=\"checkedB\"\r\n                    color=\"primary\"\r\n                />\r\n                }\r\n                label=\"一覧表示\"\r\n            />\r\n          </span>\r\n        </div>\r\n    )\r\n\r\n}\r\n\r\nconst UserTagConfigList=()=>{\r\n    \r\n\r\n    const uConfigList=useSelector(state=>state.auth_login.user_config,[]);\r\n    \r\n    const dispatch=useDispatch();\r\n    \r\n    const classes=useStyles();\r\n\r\n    useEffect(() => {\r\n        dispatch(loadUserConfig());\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        //console.log(\"get config change\");\r\n    }, [uConfigList]);\r\n\r\n    const onResetClick=()=>{\r\n        dispatch(resetUserConfig()); \r\n    }\r\n\r\n\r\n    return (\r\n\r\n        <div className={classes.root}>\r\n            <div>\r\n                <Button \r\n                    variant='contained'\r\n                    color=\"primary\"\r\n                    onClick={onResetClick} \r\n                    >全タグリセット</Button>\r\n            </div>\r\n\r\n        {uConfigList.length>0 &&\r\n            uConfigList.map((d)=>{\r\n                return ( <UserTagConfigColumn\r\n                    data={d}/>\r\n                )\r\n\r\n            })\r\n        }\r\n\r\n        </div>\r\n\r\n    )\r\n\r\n\r\n}\r\nexport default UserTagConfigList;\r\n","import React, {useState,useEffect} from 'react';\r\nimport {connect,useSelector,useDispatch}  from 'react-redux';\r\nimport { LinearProgress, makeStyles } from '@material-ui/core';\r\nimport UserTagConfigList from '../components/UserTagConfigList';\r\n\r\n//テスト表示用\r\n\r\n\r\nconst listStyles=makeStyles((theme)=>({\r\n    base: {\r\n        position:'relative',\r\n        top:'60px'\r\n    },\r\n\r\n    progress:{\r\n        width: '80%',\r\n        margin: '2px',\r\n    }\r\n\r\n}));\r\n\r\n//メインページの画面メイン\r\nconst UserConfigListPage=(props)=>{\r\n    \r\n    const classes=listStyles();\r\n    \r\n    return (\r\n\r\n        <div className={classes.base} >\r\n            <UserTagConfigList/>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default  UserConfigListPage;","import react,{useState,useEffect,useRef} from 'react';\r\nimport { useDispatch,useSelector } from 'react-redux';\r\nimport {\r\n    Collapse,\r\n    Button,\r\n    FormControl,\r\n    NativeSelect,\r\n    RadioGroup,\r\n    Radio,\r\n    FormControlLabel,\r\n    TextField\r\n    } from '@material-ui/core';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nimport { TAG_TYPES,TAG_RANKS} from '../lib/TagTypeNames';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport {GetTagName} from './parts/ShowInfoSet';\r\nimport { showTagAdmin, makeNewTagByAdmin, modifyTagByAdmin} from '../actions';\r\n\r\n\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    \r\n    root: {\r\n        //display: 'flex',\r\n       // justifyContent: 'center',\r\n        flexWrap: 'wrap',\r\n        top:'200px',\r\n        '& > *': {\r\n          margin: theme.spacing(0.5),\r\n        },\r\n        padding:\"0px 0px 0px\"\r\n      },\r\n    formControl: {\r\n      margin: theme.spacing(1),\r\n      minWidth: 120,\r\n    },\r\n    selectEmpty: {\r\n      marginTop: theme.spacing(2),\r\n    },\r\n  }));\r\n  \r\n\r\nconst tagRanks={\r\n    1000:\"最重要\",\r\n    100:\"重要\",\r\n    10:\"通常\",\r\n    1:\"表示用(現在利用せず）\"\r\n};\r\n\r\n\r\n\r\n\r\nexport const UserTagAdminColumn=(props)=>{\r\n    //console.log(props);\r\n    //console.log(\" UserTagConfigColumn start \");\r\n    const [viewmode,setViewMode]=useState(true);\r\n    \r\n    const changFlg=useSelector(state=>state.tag_admin.change,0);\r\n    const [tagName,setTagName]=useState(\"\");\r\n    const [tagRank,setTagRank]=useState(-1);\r\n    const [tagType,setTagType]=useState(-1);\r\n    const [errorMsg,setErrorMsg]=useState(\"\");\r\n\r\n\r\n    const classes=useStyles();\r\n    const dispatch=useDispatch();\r\n\r\n\r\n    const onSelect=()=>{\r\n        props.onSelect(props.data.id);\r\n        \r\n    };\r\n\r\n    const onColumnCancel=()=>{\r\n        //console.log(\"onCancel Done\",props.data.id);\r\n        //setViewMode(true);\r\n        props.onCancel();\r\n    };\r\n\r\n    useEffect(() => {\r\n        //console.log(\"get change!\");\r\n        setTagName(props.data.strTagName);\r\n        setTagRank(props.data.numTagRank);\r\n        setTagType(props.data.numTagType);\r\n\r\n        //console.log((\"---\",TAG_TYPES.find(el=>el.id==props.data.numTagType)));\r\n    }, [props.data]);\r\n\r\n    \r\n    const rank=(tr)=>(TAG_RANKS.find(el=>el.id==tr));\r\n    const type=(tt)=>(TAG_TYPES.find(el=>el.id==tt));\r\n\r\n    const modeView=()=>{\r\n        //console.log(\"type\",type,tagType);\r\n        //if (Object.typeOf(type)=='undefined') console.log(\" undifined error\");\r\n        //const =TAG_TYPES.find(el=>el.id==tagType);\r\n\r\n        \r\n        return (\r\n            <div>\r\n                <span>{props.data.strTagName}</span>\r\n                <span>{rank(tagRank).name}</span>\r\n                <span>{type(tagType).name}</span>\r\n\r\n                <span>\r\n                    <Button onClick={()=>onSelect()}\r\n                        variant='contained'\r\n                        label=\"登録\">編集\r\n                    </Button>\r\n                 </span>\r\n            </div>\r\n        )\r\n    };\r\n\r\n    const onSubmit=()=>{\r\n\r\n        if (tagName==\"\"){\r\n            setErrorMsg(\"タグ名がありません\");\r\n            return;\r\n        }\r\n\r\n        if (tagRank==-1 || tagRank==0){\r\n            setErrorMsg(\"タグの重要度が未設定です\"+ String(tagRank));\r\n            return;\r\n        }\r\n\r\n        if (tagType==-1 || tagType==0){\r\n            setErrorMsg(\"タグの種類が未設定です\"+ String(tagType) );\r\n            return;\r\n        }\r\n\r\n        let dispatcher=modifyTagByAdmin;\r\n        if (props.data.id==-1){\r\n            dispatcher=makeNewTagByAdmin;\r\n        }\r\n\r\n        dispatch(dispatcher(\r\n            props.data.id,\r\n            tagName,\r\n            tagRank,\r\n            tagType\r\n        ));\r\n        setErrorMsg(\"\");\r\n    }\r\n\r\n    const modeEdit=()=>{\r\n        return(\r\n            \r\n            <div>\r\n                {errorMsg!=\"\" ?\r\n                    <div>{errorMsg}</div>\r\n                :\r\n                    <div/>\r\n                }\r\n                <div>\r\n                <span>\r\n                    <TextField \r\n                        //label=\"タグ名\"\r\n                        placeholder=\"タグの名称を入力\"\r\n                        onChange={(e)=>setTagName(e.target.value)}\r\n                        defaultValue={tagName}\r\n                        //value={props.data.strTagName}\r\n                        variant=\"outlined\"\r\n                        disabled={false}\r\n                        />\r\n                </span>\r\n                <span>\r\n                    <FormControl className={classes.formControl}>\r\n                        <NativeSelect\r\n                        //value={props.data.numTagRank}\r\n                        defaultValue={tagRank}\r\n                        onChange={(e)=>setTagRank(e.target.value)}\r\n                        name=\"tagrank\"\r\n                        className={classes.selectEmpty}\r\n                        inputProps={{ 'aria-label': 'age' }}\r\n                        >\r\n                            {TAG_RANKS.map((d)=>{\r\n                                    return (<option value={d.id}>{d.name}</option>)\r\n                                })\r\n                            }\r\n                        </NativeSelect>\r\n                    </FormControl>\r\n                    <FormControl className={classes.formControl}>\r\n                        <NativeSelect\r\n                        //value={props.data.numTagType}\r\n                        onChange={(e)=>setTagType(e.target.value)}\r\n                        defaultValue={tagType}\r\n                        name=\"status\"\r\n                        className={classes.selectEmpty}\r\n                        inputProps={{ 'aria-label': 'age' }}\r\n                        >\r\n                             {TAG_TYPES.map((d)=>{\r\n                                    return (<option value={d.id}>{d.name}</option>)\r\n                                })\r\n                            }\r\n                            \r\n                        </NativeSelect>\r\n                    </FormControl>\r\n\r\n                </span>\r\n                <span>\r\n                    <Button onClick={onSubmit}\r\n                    variant='contained'\r\n                    label=\"登録\"\r\n                    >登録</Button>\r\n\r\n                </span>\r\n                <span>\r\n                    <Button onClick={onColumnCancel}\r\n                    variant='contained'\r\n                    label=\"キャンセル\"\r\n                    >キャンセル</Button>\r\n                </span>\r\n\r\n            </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <div>\r\n        {tagType==-1 ?\r\n            <div/>\r\n        :props.add ?\r\n            modeEdit()\r\n        :props.open ?\r\n            modeEdit()\r\n        :\r\n            modeView()\r\n        }\r\n        </div>\r\n    )\r\n\r\n}\r\n\r\n\r\nconst UserTagAdminList=()=>{\r\n    //const [funcCancel,setFuncCancel]=useState(null)\r\n    \r\n    const classes=useStyles();\r\n    const tag_list=useSelector(state=>state.tag_admin.tag_list,[]);\r\n    const changFlg=useSelector(state=>state.tag_admin.change,0);\r\n    const [openid,setOpenId]=useState(-1);\r\n    const [add,setAdd]=useState(false);\r\n\r\n    const changeViewList=(id=4)=>{\r\n        return tag_list.filter(data=>data.numTagType==id)\r\n    };\r\n    const [viewtype,setViewType]=useState(4)\r\n\r\n    const [showArray,setShowArray]=useState(changeViewList());\r\n\r\n\r\n    //const uConfigList=useSelector(state=>state.admin.tag_list,[]);\r\n    \r\n    const dispatch=useDispatch();\r\n    \r\n\r\n    useEffect(() => {\r\n        dispatch(showTagAdmin());\r\n        setOpenId(-1);\r\n    }, [changFlg]);\r\n\r\n    const onColumnSelect=(id)=>{\r\n        setAdd(false)\r\n        setOpenId(id);\r\n    };\r\n\r\n    const onCancel=()=>{\r\n        setOpenId(-1);\r\n    }\r\n\r\n    useEffect(() => {\r\n        //console.log(showArray);\r\n        setShowArray(changeViewList(viewtype));\r\n        setAdd(false);\r\n        \r\n    }, [viewtype,tag_list]);\r\n\r\n    const onAddClick=()=>{\r\n        setAdd(true);\r\n        setOpenId(-1);\r\n    }\r\n\r\n\r\n\r\n    return (\r\n\r\n        <div className={classes.root}>\r\n            <div>\r\n                <Button\r\n                    label=\"タグ追加\"\r\n                    onClick={()=>onAddClick()}\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    disabled={add}\r\n                >タグ追加</Button>\r\n            </div>\r\n            <div>\r\n                <FormControl component=\"fieldset\">\r\n                <RadioGroup\r\n                    row\r\n                    defaultValue={viewtype}\r\n                    >\r\n                    {TAG_TYPES.map((d)=>{\r\n                        return (<FormControlLabel \r\n                            value={d.id}\r\n                            checked={d.id==viewtype}\r\n                            onChange={()=>setViewType(d.id)} \r\n                            control={<Radio />} \r\n                            label={d.name} \r\n                            />)\r\n                        })\r\n                    }                    \r\n                </RadioGroup>\r\n                </FormControl>\r\n            </div>\r\n            <hr/>\r\n            { add ?\r\n                <UserTagAdminColumn add={true} open={true} onCancel={()=>setAdd(false)} onSelect={onColumnSelect}  \r\n                data={{ id:-1,strTagName:\"\",numTagRank:0,numTagType:viewtype }}/>\r\n                :\r\n                <div/>\r\n            }\r\n        \r\n            {\r\n            showArray.map((d)=>{\r\n                return (\r\n                <UserTagAdminColumn add={false} open={d.id==openid} onCancel={onCancel} onSelect={onColumnSelect}  data={d}/>\r\n            )\r\n        })\r\n\r\n            }\r\n \r\n        </div>\r\n\r\n    )\r\n\r\n\r\n}\r\nexport default UserTagAdminList;\r\n","import React, {useState,useEffect} from 'react';\r\nimport {connect,useSelector,useDispatch}  from 'react-redux';\r\nimport { LinearProgress, makeStyles } from '@material-ui/core';\r\nimport UserTagAdminList from '../components/UserTagAdminList';\r\nimport { auth_login_success } from '../actions';\r\n\r\n//テスト表示用\r\n\r\n\r\nconst listStyles=makeStyles((theme)=>({\r\n    base: {\r\n        position:'relative',\r\n        top:'60px'\r\n    },\r\n\r\n    progress:{\r\n        width: '80%',\r\n        margin: '2px',\r\n    }\r\n\r\n}));\r\n\r\n//メインページの画面メイン\r\nconst TagAdminListPage=(props)=>{\r\n    const dispatch=useDispatch();\r\n    const changFlg=useSelector(state=>state.tag_admin.change,0);\r\n    \r\n    const classes=listStyles();\r\n    //タグ設定を更新したら初期設定内の更新も行ってしまう\r\n    useEffect(() => {\r\n        dispatch(auth_login_success());\r\n    }, [changFlg]);\r\n\r\n    \r\n    return (\r\n\r\n        <div className={classes.base} >\r\n            <UserTagAdminList/>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default  TagAdminListPage;","import React,{useState,useEffect} from 'react';\r\nimport {useHistory} from 'react-router';\r\nimport {Route,useLocation,Switch,withRouter} from 'react-router-dom';\r\nimport SlideRoutes from 'react-slide-routes';\r\nimport TestMain  from './pages/TestMain';\r\nimport MainListPage from './pages/MainListPage';\r\nimport TaggedSearchPage from './pages/TaggedSearchPage';\r\nimport  ReplyThreadPage  from './pages/ReplyThreadPage';\r\nimport NoticeListPage from './pages/NoticeListPage';\r\nimport FavoriteListPage from './pages/FavoriteListPage';\r\nimport UserConfigListPage from './pages/UserConfigListPage';\r\nimport TagAdminListPage from './pages/TagAdminListPage';\r\nimport {CSSTransition}  from 'react-transition-group';\r\nimport {TransitionGroup} from 'react-transition-group';\r\nimport './pageSlider.scss';\r\n\r\n\r\nconst PageRouter=(props)=>{\r\n\r\n    const location=useLocation();\r\n\r\n    const getPathDepth=(location)=> {\r\n      let pathArr = location.pathname.split(\"/\");\r\n      pathArr = pathArr.filter(n => n !== \"\");\r\n      return pathArr.length;\r\n    };\r\n\r\n    const [prevDepth,setPrevDepth]=useState(getPathDepth(location));\r\n\r\n    useEffect(() => {\r\n      setPrevDepth(getPathDepth(location));\r\n      console.log(\"depth\", getPathDepth(location));\r\n    },[location]);\r\n\r\n    const currentKey = location.pathname.split(\"/\")[1] || \"/\";\r\n    const timeout = { enter: 800, exit: 400 };\r\n\r\n    \r\n    \r\n    return (\r\n      <div>\r\n          <TransitionGroup component=\"div\" className=\"App\">\r\n          <CSSTransition\r\n          key={currentKey}\r\n          timeout={timeout}\r\n          classNames=\"pageSlider\"\r\n          mountOnEnter={true}\r\n          unmountOnExit={true}\r\n        >\r\n\r\n        <div  className={ getPathDepth(location) - prevDepth >= 0    ? \"left\" : \"right\" }>\r\n          \r\n                <Route exact path='/main' exact  component={MainListPage} />\r\n                <Route  path='/tag' exact component={TaggedSearchPage} />\r\n                <Route  path='/test'  exact > <TestMain/> </Route>\r\n                <Route  path='/notice' exact component={NoticeListPage} />\r\n                <Route  path='/favorite' exact component={FavoriteListPage} />\r\n                <Route  path='/tagconfig' exact component={UserConfigListPage} />\r\n                <Route  path='/tagadmin' exact component={TagAdminListPage} />\r\n                <Route  path='/reply/:id' exact  component={ReplyThreadPage}  />\r\n              </div>\r\n              </CSSTransition>\r\n          </TransitionGroup>\r\n      </div>\r\n    )\r\n\r\n}\r\n\r\nexport default  withRouter(PageRouter);","import React, {useState,useEffect} from 'react';\r\nimport {useDispatch,useSelector}  from 'react-redux';\r\nimport MainHeader from \"./components/MainHeader\";\r\nimport MemoInsertButton from \"./components/MemoInsertButton\";\r\nimport FreeTagInputModal from './components/FreeTagInputModal';\r\nimport  FormedTagPutModal from './components/FormedTagPutModal';\r\nimport  SideMenu from './components/SideMenu';\r\nimport  SideDrawer from './components/SideDrawer';\r\nimport FeedbackSnackBar from './components/FeedbackSnackBar';\r\nimport {FREE_MODAL_OPEN,FORMED_MODAL_OPEN} from './lib/ActionTypeString';\r\nimport PageRouter from './routers';\r\n\r\nimport  {auth_login_success} from './actions';\r\nimport APICallController from './lib/ConnectionLibrary';\r\nimport { checkHasContent } from './lib/UtilityLibrary';\r\nimport { makeStyles } from '@material-ui/core';\r\nimport { useWindowDimensions } from './lib/useWindowDimensions';\r\n\r\nconst Styles=makeStyles({\r\n    \r\n    side: {\r\n        position:\"fixed\",\r\n        marginTop:'28px',\r\n       width:'200px',\r\n       //top:'120px',\r\n       //zIndex:10,\r\n     } ,\r\n     \r\n    contentMobile: {\r\n        //left:\"150px\",\r\n        marginTop:\"50px\",\r\n       //maxWidth:\"800px\",\r\n       //marginLeft:\"10px\"\r\n     },\r\n     \r\n     \r\n    contentDesktop: {\r\n        left:\"200px\",\r\n        marginTop:\"50px\",\r\n       //maxWidth:\"800px\",\r\n       marginLeft:\"210px\"\r\n     },\r\n\r\n     article :{\r\n        display:\"flex\",\r\n       \r\n    }\r\n     \r\n});\r\n\r\n\r\n//メインページの画面メイン\r\nconst PageBase=(props)=>{\r\n\r\n    const dispatch=useDispatch();\r\n    const  error=useSelector(state=>state.error_control.errorFlg) ;\r\n    const [menuOpen,setMenuOpen]=useState(false);\r\n    const [freetagOpen,setFreeTagOpen]=useState(false);\r\n    const [formtagOpen,setformTagOpen]=useState(false);\r\n    const [followOpen,setFollowOpen]=useState(false);\r\n    const reply_source=useSelector(state=>state.reply_main.reply_source);\r\n    const follow_data = useSelector(state => state.follow_main.follow_data,{});\r\n    const tag_list=useSelector(state=>state.auth_login.tag_list,[]);\r\n\r\n    const classes=Styles();\r\n\r\n    const onMenuOpen=()=>{\r\n        setMenuOpen(true);\r\n    };\r\n\r\n    const onMenuClose=()=>{\r\n        setMenuOpen(false);\r\n    };\r\n\r\n\r\n\r\n    const closeModal=()=>{\r\n        setformTagOpen(false);\r\n        setFreeTagOpen(false);\r\n        setFollowOpen(false);\r\n\r\n    };\r\n\r\n    \r\n    useEffect(() => {\r\n        //認証までの実装　実際はログイン終了時のアクションで以下を行う\r\n        if ( tag_list && tag_list.length>0) return;\r\n\r\n        if(error) return;\r\n\r\n        dispatch(auth_login_success());\r\n    }, []);\r\n\r\n\r\n    useEffect(()=>{\r\n        if(checkHasContent(follow_data)|| checkHasContent(reply_source) ){\r\n            //console.log(\"転送データを受け取った！\",follow_data);\r\n            //setFollowOpen(true);\r\n            setFreeTagOpen(true);\r\n        }\r\n\r\n    },[follow_data,reply_source]);\r\n\r\n    const onModalOpen=(action)=>{\r\n        switch (action) {\r\n            case FREE_MODAL_OPEN:\r\n                setFreeTagOpen(true);\r\n                break;\r\n        \r\n            case FORMED_MODAL_OPEN:\r\n                setformTagOpen(true);\r\n                break;\r\n            \r\n            default:\r\n                break;\r\n        }\r\n    };\r\n\r\n    const {width,height}=useWindowDimensions();\r\n    const isMobile=width<500;\r\n\r\n    const SideSet=()=>{\r\n        if(isMobile){\r\n            console.log(\"mobileset true\");\r\n            return(\r\n                <div ><SideDrawer mobile={true}  open={false}  onClose={onMenuClose}/></div>\r\n            )\r\n        }else{\r\n            return(\r\n                <div className={classes.side} ><SideDrawer mobile={false}  open={true} /></div>\r\n            )\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n        {error ?\r\n            <div/>\r\n            :   \r\n            <div>\r\n                <MainHeader mobile={isMobile}  openMenu={onMenuOpen} />\r\n                {isMobile ?\r\n                    <SideDrawer mobile={isMobile}  open={menuOpen} onClose={ onMenuClose } />\r\n                :\r\n                    <div className={classes.side} >\r\n                        <SideMenu/>\r\n                    </div>\r\n\r\n                }\r\n\r\n                <div className={isMobile ? classes.contentMobile : classes.contentDesktop  }>\r\n                    <PageRouter/>\r\n                </div>\r\n                <FeedbackSnackBar/>\r\n                <MemoInsertButton  onModalOpen={onModalOpen} />\r\n                <FormedTagPutModal open={formtagOpen} onClose={()=>closeModal()} />\r\n                <FreeTagInputModal open={freetagOpen} onClose={()=>closeModal()}  follow_data={follow_data} reply_source={reply_source} />\r\n                \r\n            </div>\r\n        }\r\n        </div>\r\n\r\n    )\r\n\r\n}\r\n\r\nexport default  PageBase;","import {useHistory} from 'react-router-dom';\r\nimport {LoginButton} from '../components/parts/AuthButtons';\r\nimport CirculerLoading from '../components/CirculerLoading';\r\nimport {Card,CardContent,CardMedia,CardActions} from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core';\r\n\r\nconst styles=makeStyles((theme)=>({\r\n   loginroot:{\r\n\r\n      justifyContent:\"center\",\r\n      display: \"flex\",\r\n      flexWrap: \"wrap\",\r\n      width: 400,\r\n      margin: `${theme.spacing(0)} auto` \r\n   },\r\n\r\n   card: {\r\n      //:\"50%\",\r\n      justifyContent:\"center\",\r\n      marginTop: theme.spacing(20),\r\n      width:'70%',\r\n      maxWidth:\"300px\"\r\n\r\n   },\r\n   \r\n   button:{\r\n      display:\"block\",\r\n      marginRight:\"auto\",\r\n      marginLeft:\"auto\"\r\n   }\r\n\r\n}));\r\n\r\nconst SingleButtonPage = ({Content,ButtonAction,Footer}) => {\r\n   const history=useHistory();\r\n   const classes=styles();\r\n   \r\n   return (\r\n\r\n      <div className={classes.loginroot}>\r\n         <Card className={classes.card}>\r\n            <CardContent>\r\n               {Content}\r\n            </CardContent>\r\n            <CardActions>        \r\n               <div  className={classes.button}>{ButtonAction}</div>\r\n            </CardActions>\r\n         </Card>\r\n         {Footer} \r\n      </div>\r\n   );\r\n};\r\n\r\nexport default SingleButtonPage;","import {useHistory} from 'react-router-dom';\r\nimport {LoginButton} from '../components/parts/AuthButtons';\r\nimport CirculerLoading from '../components/CirculerLoading';\r\nimport {Card,CardContent,CardMedia,CardActions} from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core';\r\nimport SingleButtonPage from './SingleButtonPage';\r\n\r\nconst styles=makeStyles((theme)=>({\r\n   loginroot:{\r\n\r\n      justifyContent:\"center\",\r\n      display: \"flex\",\r\n      flexWrap: \"wrap\",\r\n      width: 400,\r\n      margin: `${theme.spacing(0)} auto` \r\n   },\r\n\r\n   card: {\r\n      //:\"50%\",\r\n      justifyContent:\"center\",\r\n      marginTop: theme.spacing(20),\r\n      width:'70%',\r\n      maxWidth:\"300px\"\r\n\r\n   },\r\n   \r\n   button:{\r\n      display:\"block\",\r\n      marginRight:\"auto\",\r\n      marginLeft:\"auto\"\r\n   }\r\n\r\n}));\r\n\r\nconst LoginPage = () => {\r\n   const history=useHistory();\r\n   const classes=styles();\r\n   const CardContent=(\r\n      <CardMedia  height={\"50%\"} component=\"img\" image={`${process.env.PUBLIC_URL}/tagleadlogo.png`} />\r\n   );\r\n\r\n   const CardAction=(\r\n      <LoginButton  redi={false}　callback={()=>history.push(\"/\")}/>\r\n   );\r\n    const Footer=(\r\n      <CirculerLoading isModal={true} />\r\n    )\r\n\r\n   return (\r\n         <SingleButtonPage \r\n            Content={CardContent}\r\n            ButtonAction={CardAction}\r\n            Footer={Footer}\r\n         />\r\n   );\r\n};\r\n\r\nexport default LoginPage;","import { Button } from '@material-ui/core';\r\nimport React ,{ useState,useEffect} from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { LogOutButton } from '../components/parts/AuthButtons';\r\nimport {Card} from \"@material-ui/core\";\r\nimport SingleButtonPage from './SingleButtonPage';\r\n\r\nconst ErrorPage=(props)=>{\r\n\r\n    const error=useSelector(state=>state.error_control);\r\n    const [errorCode,setErrorCode] =useState(\"\");\r\n    const [errorMsg,setErrorMsg] =useState(\"\");\r\n\r\n    useEffect(() => {\r\n        setErrorCode(error.errorCode);\r\n        setErrorMsg(error.errorMsg);\r\n        \r\n    }, [error]);\r\n\r\n    const Content=()=>{\r\n        return(\r\n            <div>\r\n                <div> エラーが発生しました。　一度ログアウトしてください。</div>\r\n                <div>状況： {errorMsg}</div>\r\n                <div>コード:　{errorCode}</div>\r\n            </div>\r\n    )};\r\n    \r\n    return (\r\n        <SingleButtonPage\r\n            Content={Content()}\r\n            ButtonAction={<LogOutButton/>}\r\n            Footer={<div/>}\r\n        />\r\n    )\r\n\r\n}\r\n\r\nexport default  ErrorPage;\r\n","import { Button } from '@material-ui/core';\r\nimport React  from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport SingleButtonPage from './SingleButtonPage';\r\n\r\n\r\nconst LogoutPage=(props)=>{\r\n    const history=useHistory();\r\n    // const classes=styles();\r\n\r\n    const onPress=()=>{\r\n        history.push(\"/\");\r\n    };\r\n\r\n    return (\r\n        <SingleButtonPage \r\n            Content={ <div>ログアウトが完了しました。</div> }\r\n            ButtonAction={<Button color=\"secondary\" onClick={onPress} variant='outlined'>最初の画面へ</Button>}\r\n            Footer={<div/>}\r\n        />\r\n    );\r\n}\r\n\r\nexport default  LogoutPage;\r\n","import React,{useEffect} from 'react';\nimport PageBase from './PageBase';\nimport { useSelector } from 'react-redux';\n\nimport {Route,useHistory} from 'react-router-dom';\nimport LoginPage from './pages/LoginPage';\nimport ErrorPage from './pages/ErrorPage';\nimport LogoutPage from './pages/LogoutPage';\nimport { Switch, useLocation } from 'react-router';\nfunction App() {\n  //const datas=datasend;\n  const location=useLocation();\n  const history= useHistory();\n  \n  const error=useSelector(state=>state.error_control);\n  useEffect(() => {\n    if (error.errorFlg){\n      history.push(\"/error\");\n    }\n  }, [error,location]);\n\n  return (\n\n    <div className=\"App\">\n      <Switch>\n        <Route  path='/' exact component={LoginPage} />\n        \n        <Route  path='/logout' exact component={LogoutPage} />\n        <Route  path='/error' exact component={ErrorPage} />\n        \n        { location.pathname!=\"/\" &&\n        <Route component={PageBase} />\n        }\n        </Switch>      \n\n    </div>\n  );\n}\n\n\nexport default App;\n","import {combineReducers} from 'redux';\r\n//import {reducer as formReducer} from 'redux-form';\r\nimport  {PUSH_SHOW_MEMO_BUTTON,\r\n        CLOSE_MEMOMAKE,\r\n        LOAD_NEW_MEMO,\r\n        RESET_MEMO,\r\n        MEMO_END,\r\n        MEMO_EDIT_END_MAIN,\r\n        MEMO_EDIT_END_TAG,\r\n        AUTH_SUCCESS,\r\n        MEMO_INSERT_END,\r\n        RESET_TAG,\r\n        TAGGED_SEARCH,\r\n        LOADING_START,\r\n        LOADING_END,\r\n        TAGGED_SEARCH_CONTINUE,\r\n        SHOW_REPLY,\r\n        GET_NOTICE_LIST,\r\n        MAKE_NEWFOLLOW_MODAL,\r\n        DELETE_NEWFOLLOW_MODAL,\r\n        MAKE_NEW_REPLY_MODAL,\r\n        DELETE_NEW_REPLY_MODAL,\r\n        SHOW_SNACK,\r\n        SHOW_FAVORITE,\r\n        USER_CONFIG_LIST,\r\n        CHANGE_USER_CONFIG,\r\n        ERROR_RESET,\r\n        RESULT_ERROR,\r\n        CONNECT_ERROR,\r\n        CRITICAL_ERROR,\r\n        SHOW_TAG_ADMIN,\r\n        MAKE_TAG_ADMIN,\r\n        MODIFY_TAG_ADMIN\r\n    } from '../lib/ActionTypeString';\r\n\r\nimport  {useSnackbar} from 'notistack';\r\n\r\nconst INIT_ACTION={\r\n    type:\"NONE\",\r\n    user_list:[],\r\n    unit_list:[],\r\n    timeline:[],\r\n    isPrivate:false,\r\n    login_id:\"\",\r\n    results:[],\r\n    endflg:false,\r\n    notices:[]\r\n};\r\n\r\n//最初の認証時に取得する情報　各種各ユーザー情報など\r\nconst INIT_AUTH_STATE={\r\n    isLoad:false,\r\n    user_list:[],\r\n    main_tag:[],\r\n    sub_tag:[],\r\n    all_tag:[],\r\n    formatted:[],\r\n    user_config:[]\r\n\r\n};\r\n\r\nconst auth_login=(state=INIT_AUTH_STATE,action=INIT_ACTION)=>{\r\n    \r\n    const result=action.result;\r\n    \r\n    switch (action.type) {\r\n        case LOADING_START:\r\n            return {\r\n                ...state,\r\n                isLoad:true\r\n            };\r\n        case LOADING_END:\r\n            return {\r\n                ...state,\r\n                isLoad:false\r\n            };\r\n\r\n        case AUTH_SUCCESS:\r\n            //console.log(action);\r\n            const userConf=result.res;\r\n            \r\n            return  { ...state,\r\n                userId:userConf.userId,\r\n                userRank:userConf.userRank,\r\n                user_list:userConf.user_list,\r\n                main_tag:userConf.main,\r\n                sub_tag:userConf.sub,\r\n                all_tag:userConf.all,\r\n                formatted:userConf.formatted\r\n                //unit_list:result.unit_list\r\n                //tag_list:action.tag_list\r\n            };\r\n\r\n    \r\n        case USER_CONFIG_LIST:\r\n        \r\n            return  { ...state,\r\n                user_config:result.user_config,\r\n            };\r\n        case CHANGE_USER_CONFIG:\r\n            //こまめに値を返さないと表示がずれるので現状を返す\r\n            return  { ...state,\r\n                main_tag:result.main_tag,\r\n                sub_tag:result.sub_tag,\r\n                user_config:result.user_config,\r\n            };\r\n\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nconst INIT_TAG_ADMIN_STATE={\r\n    tag_list:[],\r\n    change:0\r\n};\r\n\r\nconst tag_admin=(state=INIT_TAG_ADMIN_STATE,action=INIT_ACTION)=>{\r\n    switch(action.type){\r\n        case SHOW_TAG_ADMIN:\r\n            console.log(\"SHOW_TAG_ADMIN DONE\");\r\n            return {...state,\r\n                tag_list:action.result.tag_list\r\n            }; \r\n\r\n        case MAKE_TAG_ADMIN:\r\n        case MODIFY_TAG_ADMIN:\r\n            return {\r\n                ...state,\r\n                change:action.result.change\r\n            }\r\n    \r\n        default:\r\n            return state;\r\n\r\n\r\n    }\r\n    \r\n}\r\n\r\n\r\nconst INIT_USER_TAG={\r\n    user_config:[]\r\n\r\n}\r\n\r\n\r\n\r\n//各ユーザーのログイン時のやり取り\r\nconst INIT_USER_STATE={\r\n    login_id:-1,\r\n    open_password:false,\r\n};\r\n\r\nconst INIT_MEMO_MAIN_STATE={\r\n    timeline:[],\r\n    read:[],\r\n    fav:[],\r\n    memomake_open:false,\r\n    endflg:false,\r\n    change:0\r\n};\r\n\r\nconst INIT_MEMO_STATE=\"\";\r\n\r\nconst memo_main=(state=INIT_MEMO_MAIN_STATE,action=INIT_ACTION)=>{\r\n    \r\n    const result=action.result;\r\n\r\n    switch(action.type){\r\n        case RESET_MEMO:\r\n            return {...state,\r\n                timeline:result.timeline,\r\n                read:result.read,\r\n                fav:result.fav,\r\n                endflg:result.endFlg\r\n            }; \r\n            \r\n        case LOAD_NEW_MEMO:\r\n            //console.log(action);\r\n            const resA=state.timeline.concat().concat(result.timeline);\r\n            const read=state.read.concat().concat(result.read);\r\n            const fav=state.fav.concat().concat(result.fav);\r\n\r\n            //resA.concat(action.timeline);\r\n           // console.log(resA);\r\n\r\n        \r\n            return {...state,\r\n                timeline:resA,\r\n                read:read,\r\n                fav:fav,\r\n                //results:action.results,\r\n                endflg:result.endflg\r\n            }; \r\n\r\n        case MEMO_EDIT_END_MAIN:\r\n            \r\n            console.log(\"result:\",result);\r\n            const newtimeline=state.timeline.map((d)=> d.id===result.id ? result : d );\r\n            return {\r\n                ...state,\r\n                timeline:newtimeline\r\n            };\r\n            \r\n        case PUSH_SHOW_MEMO_BUTTON:\r\n            //console.log(state);\r\n\r\n            return Object.assign({},state,{\r\n                isPrivate:action.isPrivate,\r\n                memomake_open:action.memomake_open}\r\n            );\r\n\r\n\r\n        case CLOSE_MEMOMAKE:\r\n            return Object.assign({},state,{ memomake_open:false}\r\n            );\r\n\r\n        case MEMO_END:\r\n            return {...state,\r\n                timeline:[],\r\n                read:[],\r\n                fav:[],\r\n                //results:action.results,\r\n                endflg:false\r\n            };\r\n\r\n            case MEMO_INSERT_END:\r\n                return {...state,\r\n                    change:result.change\r\n                };\r\n    \r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport const tagged_main=(state=INIT_TAGGED_SEARCH,action=INIT_ACTION)=>{\r\n    \r\n    const result=action.result;\r\n\r\n    switch(action.type){\r\n\r\n\r\n\r\n        case TAGGED_SEARCH:\r\n            return {...state,\r\n                timeline:result.timeline,\r\n                read:result.read,\r\n                fav:result.fav,\r\n                endflg:result.endflg\r\n            };     \r\n        \r\n        case TAGGED_SEARCH_CONTINUE:\r\n            if( result.timeline.length==0){\r\n                console.log(\" has no next \");\r\n                return {...state,\r\n                    endflg:result.endflg\r\n                }; \r\n    \r\n            }\r\n\r\n            return {...state,\r\n                timeline:state.timeline.concat().concat(result.timeline),\r\n                read:state.read.concat().concat(result.read),\r\n                fav:state.fav.concat().concat(result.fav),\r\n                //results:action.results,\r\n                endflg:result.endflg\r\n            }; \r\n\r\n        case MEMO_EDIT_END_TAG:\r\n            console.log(\"result:\",result);\r\n            const newtimeline=state.timeline.map((d)=> d.id===result.id ? result : d );\r\n            return {\r\n                ...state,\r\n                timeline:newtimeline\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\n\r\n\r\n\r\nconst show_favorite=(state=INIT_MEMO_STATE,action)=>{\r\n    switch(action.type){\r\n        case SHOW_FAVORITE:\r\n            return {...state,\r\n                timeline:action.result.timeline,\r\n                read:action.result.read,\r\n                fav:action.result.fav,\r\n                endflg:action.result.endFlg\r\n            }; \r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\n\r\n\r\n\r\nconst INIT_TAGGED_SEARCH={\r\n    timeline:[],\r\n    read:[],\r\n    fav:[],\r\n    endflg:false,\r\n    change:0\r\n};\r\n\r\nconst INIT_REPLY_MAIN={\r\n    self_data:{},\r\n    reply_source:{},\r\n    parent_data:null,\r\n    past_thread:[],\r\n    child_data:[],\r\n    future_thread:[],\r\n    load_flg:false\r\n};\r\n\r\n\r\nconst INIT_FOLLOW_ACTION={\r\n    follow_data:{},\r\n\r\n};\r\n\r\n\r\nexport const follow_main=(state=INIT_FOLLOW_ACTION,action)=>{\r\n    switch (action.type){\r\n\r\n        case MAKE_NEWFOLLOW_MODAL:\r\n            return {\r\n                ...state,\r\n                follow_data:action.follow_data,\r\n            };\r\n        case DELETE_NEWFOLLOW_MODAL:\r\n            return {\r\n                ...state,\r\n                follow_data:{},\r\n            };\r\n        default:\r\n            return state;\r\n\r\n    }\r\n}\r\n\r\n\r\nexport const reply_main=(state=INIT_REPLY_MAIN,action)=>{\r\n    switch(action.type){\r\n\r\n        case MAKE_NEW_REPLY_MODAL:\r\n            return {\r\n                ...state,\r\n                reply_source:action.reply_source\r\n            };\r\n        case DELETE_NEW_REPLY_MODAL:\r\n            return {\r\n                ...state,\r\n                reply_source:{}\r\n            };\r\n\r\n\r\n        case SHOW_REPLY:\r\n            \r\n            const result=action.result;\r\n            console.log(\" reply source \",result);\r\n\r\n            const past_thread=[];\r\n            const child_data=[];\r\n            const future_thread=[];\r\n            let parent_data={};\r\n            console.log(\" reply timeline \",result.timeline);\r\n\r\n            const self_data=result.timeline.find((d) => d.id===parseInt(result.id));\r\n                \r\n            result.timeline.map((d)=>{\r\n                if(d.id<self_data.id){\r\n                    if(self_data.keyParent===d.id){\r\n                        parent_data=d;\r\n                    }else{\r\n                        past_thread.push(d);\r\n                    }\r\n                }else if( d.id > self_data.id ){\r\n                    if(d.keyParent===self_data.id){\r\n                        child_data.push(d);\r\n                    }else{\r\n                        future_thread.push(d);\r\n                    }\r\n                }\r\n            });\r\n            \r\n\r\n            return {...state,\r\n                self_data:self_data,\r\n                parent_data:parent_data,\r\n                past_thread:past_thread,\r\n                child_data:child_data,\r\n                future_thread:future_thread,\r\n                endFlg:true,\r\n                load_flg:true\r\n                \r\n            };\r\n        default:\r\n            return state;\r\n\r\n    }\r\n}\r\n\r\n\r\n\r\nconst INIT_NOTICE={\r\n    notices:[],\r\n    snack:[],\r\n    count:0\r\n};\r\n\r\nexport const notice_main=(state=INIT_NOTICE,action=INIT_ACTION)=>{\r\n    switch (action.type){\r\n        case GET_NOTICE_LIST:\r\n            return {\r\n                ...state,\r\n                notices:action.result.notices,\r\n                count:action.result.count     \r\n            };\r\n        case SHOW_SNACK:\r\n\r\n            return {\r\n                ...state,\r\n                snack:[...state.snack,action.msg]\r\n            };\r\n\r\n        default:\r\n            return state;\r\n    }\r\n\r\n};\r\n\r\nconst ERROR_DATA={\r\n    errorFlg:false,\r\n    errorMsg:\"\",\r\n    errorCode:-1\r\n    \r\n};\r\nconst error_control=(state= ERROR_DATA,action=INIT_ACTION) =>{\r\n\r\n    const results=action.result;\r\n    switch (action.type){\r\n        case ERROR_RESET:\r\n            return ERROR_DATA;\r\n\r\n        case RESULT_ERROR:\r\n            return {\r\n                ...state,\r\n                errorFlg:true,\r\n                errorMsg: results.errorMsg,\r\n                errorCode:results.errorCode,\r\n            };\r\n        case CRITICAL_ERROR:\r\n            return {\r\n                ...state,\r\n                errorFlg:true,\r\n                errorMsg: action.result.errorMsg\r\n            };\r\n\r\n        case CONNECT_ERROR:\r\n            return {\r\n                ...state,\r\n                errorFlg:true,\r\n                errorMsg: \"通信エラーが発生再接続します\"\r\n            };\r\n        default:\r\n            return state;\r\n\r\n    }\r\n};\r\n\r\n\r\nexport default combineReducers(\r\n    {memo_main,\r\n    auth_login,\r\n    tagged_main,\r\n    reply_main,\r\n    notice_main,\r\n    follow_main,\r\n    show_favorite,\r\n    error_control,\r\n    tag_admin\r\n});","import { createStore, applyMiddleware, compose } from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport { createLogger } from 'redux-logger';\r\nimport rootReducer from '../reducers';\r\n\r\nfunction configureStore(initialState) {\r\n\r\n    let createStoreWithMiddleware;\r\n\r\n    const logger = createLogger({\r\n        collapsed:true,\r\n        diff:true\r\n    }\r\n    );\r\n    const middleware = applyMiddleware(thunk, logger);\r\n\r\n    createStoreWithMiddleware = compose(\r\n        middleware\r\n    );\r\n\r\n    return createStoreWithMiddleware(createStore)(rootReducer, initialState);\r\n}\r\n\r\nlet store = configureStore();\r\n\r\nexport default store;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport PageRouter from './routers';\n\nimport { Provider } from 'react-redux';\nimport store from './store';\n\nimport reportWebVitals from './reportWebVitals';\nimport { BrowserRouter as Router } from 'react-router-dom';\n\nimport {SnackbarProvider} from 'notistack';\n\n ReactDOM.render(\n   \n    <Provider store={store}>\n      <SnackbarProvider maxSnack={3}>\n      <Router>\n      <App />\n      {/* <PageRouter/> */}\n      </Router>\n      </SnackbarProvider>\n    </Provider>,\n    document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}